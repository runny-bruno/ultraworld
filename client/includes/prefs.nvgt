void readprefs() {
	file f;
	f.open(prefsdir + "/config.dat", "r");
	string content = string_decrypt(f.read(), "charbhoom").replace("\r\n", "\n");
	string[] peramitors = string_split(content, "\n");
	string[] values;
	for (uint i = 0; i < peramitors.length(); i++) {
		values.insert_at(i, string_replace(peramitors[i], string_left(peramitors[i], string_contains(peramitors[i], "=", 1) + 1), "", true));
		peramitors[i] = string_replace(peramitors[i], "=" + values[i], "", true);
	}
	if (peramitors.find("name") != -1)
		name = values[peramitors.find("name")];
	if (peramitors.find("password") != -1)
		password = values[peramitors.find("password")];
	if (peramitors.find("voicechat") != -1)
		voicechat = string_to_number(values[peramitors.find("voicechat")]);
	if (peramitors.find("audioform_keyboard_echo") != -1)
		audioform_keyboard_echo = string_to_number(values[peramitors.find("audioform_keyboard_echo")]);
	if (peramitors.find("holdv") != -1)
		holdv = string_to_number(values[peramitors.find("holdv")]);
	if (peramitors.find("readerinterrupt") != -1)
		readerinterrupt = string_to_number(values[peramitors.find("readerinterrupt")]);
	if (peramitors.find("mfwc") != -1)
		mfwc = string_to_number(values[peramitors.find("mfwc")]);
	if (peramitors.find("repeatingcamera") != -1)
		repeatingcamera = string_to_number(values[peramitors.find("repeatingcamera")]);
	if (peramitors.find("kh") != -1)
		kh = string_to_number(values[peramitors.find("kh")]);
	if (peramitors.find("inputhelp") != -1)
		inputhelp = string_to_number(values[peramitors.find("inputhelp")]);
	if (peramitors.find("saveinputbox") != -1)
		saveinputbox = string_to_number(values[peramitors.find("saveinputbox")]);
	if (peramitors.find("volumestream") != -1)
		volumestream = string_to_number(values[peramitors.find("volumestream")]);
	if (peramitors.find("mmusic_volume") != -1)
		mmusic_volume = string_to_number(values[peramitors.find("mmusic_volume")]);
	if (peramitors.find("volume") != -1)
		volume = string_to_number(values[peramitors.find("volume")]);
	if (peramitors.find("pitch") != -1)
		pitch = string_to_number(values[peramitors.find("pitch")]);
	if (peramitors.find("have_cycle_inventory") != -1)
		have_cycle_inventory = string_to_number(values[peramitors.find("have_cycle_inventory")]);
	//if(peramitors.find("checkcfu")!=-1)
	//{
	//checkcfu=string_to_number(values[peramitors.find("checkcfu")]);
	//}
	//if(peramitors.find("checkcmotd")!=-1)
	//{
	//checkcmotd=string_to_number(values[peramitors.find("checkcmotd")]);
	//}
	//if(peramitors.find("motdshow")!=-1)
	//{
	//motdshow=string_to_number(values[peramitors.find("motdshow")]);
	//}
	if (peramitors.find("motdmotd") != -1)
		motdmotd = string_to_number(values[peramitors.find("motdmotd")]);
	if (peramitors.find("behind_pitch_decrease") != -1)
		behind_pitch_decrease = string_to_number(values[peramitors.find("behind_pitch_decrease")]);
	if (peramitors.find("xx") != -1)
		xx = string_to_number(values[peramitors.find("xx")]);
	if (peramitors.find("scuffs") != -1)
		scuffs = string_to_number(values[peramitors.find("scuffs")]);
	if (peramitors.find("itemsound") != -1)
		itemsound = string_to_number(values[peramitors.find("itemsound")]);
	if (peramitors.find("walktime") != -1)
		walktime = string_to_number(values[peramitors.find("walktime")]);
	if (peramitors.find("airtime") != -1)
		airtime = string_to_number(values[peramitors.find("airtime")]);
	if (peramitors.find("bmovetime") != -1)
		bmovetime = string_to_number(values[peramitors.find("bmovetime")]);
	if (peramitors.find("asktoexit") != -1)
		asktoexit = string_to_number(values[peramitors.find("asktoexit")]);
	if (peramitors.find("askbid") != -1)
		askbid = string_to_number(values[peramitors.find("askbid")]);
	if (peramitors.find("askauction") != -1)
		askauction = string_to_number(values[peramitors.find("askauction")]);
	if (peramitors.find("zonestatus") != -1)
		zonestatus = string_to_number(values[peramitors.find("zonestatus")]);
	if (peramitors.find("voiceindex") != -1)
		voiceindex = string_to_number(values[peramitors.find("voiceindex")]);
	if (peramitors.find("bufferbeep") != -1)
		bufferbeep = string_to_number(values[peramitors.find("bufferbeep")]);
	if (peramitors.find("dreaming") != -1)
		dreaming = string_to_number(values[peramitors.find("dreaming")]);
	if (peramitors.find("rules") != -1)
		rules = string_to_number(values[peramitors.find("rules")]);
	if (peramitors.find("lng") != -1)
		lng = string_to_number(values[peramitors.find("lng")]);
	if (peramitors.find("startlng") != -1)
		startlng = string_to_number(values[peramitors.find("startlng")]);
	if (peramitors.find("winsound") != -1)
		winsound = string_to_number(values[peramitors.find("winsound")]);
	if (peramitors.find("mouse") != -1)
		mouse = string_to_number(values[peramitors.find("mouse")]);
	if (peramitors.find("djoystick") != -1)
		djoystick = string_to_number(values[peramitors.find("djoystick")]);
	if (peramitors.find("mutetts") != -1)
		mutetts = string_to_number(values[peramitors.find("mutetts")]);
	if (peramitors.find("voice") != -1)
		voice = string_to_number(values[peramitors.find("voice")]);
	if (peramitors.find("pitch") != -1)
		pitch = string_to_number(values[peramitors.find("pitch")]);
	if (peramitors.find("twitteraccess") != -1)
		twitteraccess = string_to_number(values[peramitors.find("twitteraccess")]);
	if (peramitors.find("sapiforce") != -1)
		sapiforce = string_to_number(values[peramitors.find("sapiforce")]);
	if (peramitors.find("musictrack") != -1)
		musictrack = values[peramitors.find("musictrack")];
	if (peramitors.find("menuopen") != -1)
		menuopen = values[peramitors.find("menuopen")];
	if (peramitors.find("menuedge") != -1)
		menuedge = values[peramitors.find("menuedge")];
	if (peramitors.find("menuenter") != -1)
		menuenter = values[peramitors.find("menuenter")];
	if (peramitors.find("menuclick") != -1)
		menuclick = values[peramitors.find("menuclick")];
	if (peramitors.find("menuclose") != -1)
		menuclose = values[peramitors.find("menuclose")];
	if (peramitors.find("menuwrap") != -1)
		menuwrap = values[peramitors.find("menuwrap")];
	if (peramitors.find("ouviremoutrasjanelas") != -1)
		ouviremoutrasjanelas = string_to_number(values[peramitors.find("ouviremoutrasjanelas")]);
	if (peramitors.find("autologin") != -1)
		autologin = string_to_number(values[peramitors.find("autologin")]);
	if (peramitors.find("autolower") != -1)
		autolower = string_to_number(values[peramitors.find("autolower")]);
	if (peramitors.find("readchats") != -1)
		readchats = string_to_number(values[peramitors.find("readchats")]);
	if (peramitors.find("readolmsg") != -1)
		readolmsg = string_to_number(values[peramitors.find("readolmsg")]);
	if (peramitors.find("readdeathmsg") != -1)
		readdeathmsg = string_to_number(values[peramitors.find("readdeathmsg")]);
	if (peramitors.find("chatsound") != -1)
		chatsound = values[peramitors.find("chatsound")];
	if (peramitors.find("localchatsound") != -1)
		localchatsound = values[peramitors.find("localchatsound")];
	if (peramitors.find("onlinesound") != -1)
		onlinesound = values[peramitors.find("onlinesound")];
	if (peramitors.find("offlinesound") != -1)
		offlinesound = values[peramitors.find("offlinesound")];
	if (peramitors.find("pmsound") != -1)
		pmsound = values[peramitors.find("pmsound")];
	if (peramitors.find("jumpsound") != -1)
		jumpsound = values[peramitors.find("jumpsound")];
	if (peramitors.find("chsound") != -1)
		chsound = string_to_number(values[peramitors.find("chsound")]);
	if (peramitors.find("lcsound") != -1)
		lcsound = string_to_number(values[peramitors.find("lcsound")]);
	if (peramitors.find("onsound") != -1)
		onsound = string_to_number(values[peramitors.find("onsound")]);
	if (peramitors.find("offsound") != -1)
		offsound = string_to_number(values[peramitors.find("offsound")]);
	if (peramitors.find("pmsgsound") != -1)
		pmsgsound = string_to_number(values[peramitors.find("pmsgsound")]);
	if (peramitors.find("lcontrol") != -1)
		lcontrol = string_to_number(values[peramitors.find("lcontrol")]);
	if (peramitors.find("rcontrol") != -1)
		rcontrol = string_to_number(values[peramitors.find("rcontrol")]);
	if (peramitors.find("lshift") != -1)
		lshift = string_to_number(values[peramitors.find("lshift")]);
	if (peramitors.find("rshift") != -1)
		rshift = string_to_number(values[peramitors.find("rshift")]);
	if (peramitors.find("lalt") != -1)
		lalt = string_to_number(values[peramitors.find("lalt")]);
	if (peramitors.find("ralt") != -1)
		ralt = string_to_number(values[peramitors.find("ralt")]);
	if (peramitors.find("defjoy") != -1)
		defjoy = string_to_number(values[peramitors.find("defjoy")]);
	if (peramitors.find("defjoyname") != -1)
		defjoyname = values[peramitors.find("defjoyname")];
	if (peramitors.find("stereotyping") != -1)
		stereotyping = string_to_number(values[peramitors.find("stereotyping")]);
	if (peramitors.find("braille_support") != -1)
		braille_support = string_to_number(values[peramitors.find("braille_support")]);
	if (peramitors.find("youtube_format") != -1)
		youtube_format = values[peramitors.find("youtube_format")];
	if (peramitors.find("microphone_samplerate") != -1)
		microphone_samplerate = string_to_number(values[peramitors.find("microphone_samplerate")]);
	if (peramitors.find("microphonechannels") != -1)
		microphonechannels = string_to_number(values[peramitors.find("microphonechannels")]);
	if (peramitors.find("vmode") != -1)
		vmode = string_to_number(values[peramitors.find("vmode")]);
	if (peramitors.find("speak_chars") != -1)
		speak_chars = string_to_number(values[peramitors.find("speak_chars")]);
	//if(peramitors.find("playlogo")!=-1)
	//{
	//playlogo=string_to_number(values[peramitors.find("playlogo")]);
	//}
	if (peramitors.find("preloader") != -1)
		preloader = string_to_number(values[peramitors.find("preloader")]);
	if (peramitors.find("lastruns") != -1)
		lastruns = string_to_number(values[peramitors.find("lastruns")]);
	if (peramitors.find("soundcard") != -1) {
		soundcard = string_to_number(values[peramitors.find("soundcard")]);
		sound_output_device = soundcard;
	}
	if (peramitors.find("soundcardname") != -1)
		soundcardname = values[peramitors.find("soundcardname")];
	if (peramitors.find("speechmode") != -1)
		speechmode = string_to_number(values[peramitors.find("speechmode")]);
	if (peramitors.find("wrap") != -1)
		wrap = string_to_number(values[peramitors.find("wrap")]);
	if (peramitors.find("letters_autoactivate") != -1)
		letters_autoactivate = string_to_number(values[peramitors.find("letters_autoactivate")]);
	if (peramitors.find("sidescrolling") != -1)
		sidescrolling = string_to_number(values[peramitors.find("sidescrolling")]);
	if (peramitors.find("buffermode") != -1)
		buffermode = string_to_number(values[peramitors.find("buffermode")]);
	if (peramitors.find("ssbuffermode") != -1)
		ssbuffermode = string_to_number(values[peramitors.find("ssbuffermode")]);
	if (peramitors.find("vrepeat") != -1)
		v.repeat = string_to_number(values[peramitors.find("vrepeat")]);
	if (peramitors.find("vcaps") != -1)
		v.caps = string_to_number(values[peramitors.find("vcaps")]);
	if (peramitors.find("vkeyboardclicks") != -1)
		v.keyboardclicks = string_to_number(values[peramitors.find("vkeyboardclicks")]);
	if (peramitors.find("vkeyboardtheme") != -1)
		v.keyboardtheme = string_to_number(values[peramitors.find("vkeyboardtheme")]);
	if (peramitors.find("vkeyboardsoundforothers") != -1)
		v.keyboardsoundforothers = string_to_number(values[peramitors.find("vkeyboardsoundforothers")]);
	if (peramitors.find("vhearotherskeyboardsound") != -1)
		v.hearotherskeyboardsound = string_to_number(values[peramitors.find("vhearotherskeyboardsound")]);
	if (peramitors.find("vbraille_mode") != -1)
		v.braille_mode = string_to_number(values[peramitors.find("vbraille_mode")]);
	if (peramitors.find("pvrepeat") != -1)
		pv.repeat = string_to_number(values[peramitors.find("pvrepeat")]);
	if (peramitors.find("pvcaps") != -1)
		pv.caps = string_to_number(values[peramitors.find("pvcaps")]);
	if (peramitors.find("pvkeyboardclicks") != -1)
		pv.keyboardclicks = string_to_number(values[peramitors.find("pvkeyboardclicks")]);
	if (peramitors.find("pvkeyboardsoundforothers") != -1)
		pv.keyboardsoundforothers = string_to_number(values[peramitors.find("pvkeyboardsoundforothers")]);
	if (peramitors.find("pvhearotherskeyboardsound") != -1)
		pv.hearotherskeyboardsound = string_to_number(values[peramitors.find("pvhearotherskeyboardsound")]);
	if (peramitors.find("pvbraille_mode") != -1)
		pv.braille_mode = string_to_number(values[peramitors.find("pvbraille_mode")]);
	if (peramitors.find("menumusvol") != -1)
		menumusvol = string_to_number(values[peramitors.find("menumusvol")]);
	if (peramitors.find("mvol") != -1)
		mvol = string_to_number(values[peramitors.find("mvol")]);
	if (peramitors.find("motdhash") != -1)
		motdhash = values[peramitors.find("motdhash")];
	if (peramitors.find("ap") != -1)
		ap = values[peramitors.find("ap")];
	if (peramitors.find("apl") != -1)
		apl = values[peramitors.find("apl")];
	if (peramitors.find("mv") != -1)
		mv = string_to_number(values[peramitors.find("mv")]);
	if (peramitors.find("importbufferlogs") != -1)
		importbufferlogs = string_to_number(values[peramitors.find("importbufferlogs")]);
	if (peramitors.find("trackingmode") != -1)
		trackingmode = string_to_number(values[peramitors.find("trackingmode")]);
	if (peramitors.find("savevoicechats") != -1)
		savevoicechats = string_to_number(values[peramitors.find("savevoicechats")]);
	if (peramitors.find("savettschats") != -1)
		savettschats = string_to_number(values[peramitors.find("savettschats")]);
	if (peramitors.find("hearyourvoicechat") != -1)
		hearyourvoicechat = string_to_number(values[peramitors.find("hearyourvoicechat")]);
	if (peramitors.find("hearyourttschat") != -1)
		hearyourttschat = string_to_number(values[peramitors.find("hearyourttschat")]);
	if (peramitors.find("hearothersvoicechat") != -1)
		hearothersvoicechat = string_to_number(values[peramitors.find("hearothersvoicechat")]);
	if (peramitors.find("hearothersttschat") != -1)
		hearothersttschat = string_to_number(values[peramitors.find("hearothersttschat")]);
	if (peramitors.find("hearotherspmsound") != -1)
		hearotherspmsound = string_to_number(values[peramitors.find("hearotherspmsound")]);
	if (peramitors.find("othershearyourpmsound") != -1)
		othershearyourpmsound = string_to_number(values[peramitors.find("othershearyourpmsound")]);
	if (peramitors.find("sitting") != -1)
		sitting = string_to_number(values[peramitors.find("sitting")]);
	if (peramitors.find("translator") != -1)
		translator = string_to_number(values[peramitors.find("translator")]);
	if (peramitors.find("klangpos") != -1)
		klangpos = string_to_number(values[peramitors.find("klangpos")]);
	if (peramitors.find("langfile") != -1) {
		currentlangfile = values[peramitors.find("langfile")];
		lngdata = file_get_contents("languages\\" + currentlangfile + ".lng");
	}
	if (peramitors.find("keyboardlangfile") != -1) {
		currentkeyboardlangfile = values[peramitors.find("keyboardlangfile")];
		keyboarddata = file_get_contents("keyboard_languages\\" + currentkeyboardlangfile + ".lng");
	}
	for (int i = 0; i < buffers.length(); i++) {
	if (peramitors.find("b" + i + "int") != -1)
		buffers[i].interrupt = int_to_bool(string_to_number(values[peramitors.find("b" + i + "int")]));
	if (peramitors.find("b" + i + "active") != -1)
		buffers[i].active = string_to_number(values[peramitors.find("b" + i + "active")]);
	if (peramitors.find("b" + i + "muted") != -1)
		buffers[i].muted = int_to_bool(string_to_number(values[peramitors.find("b" + i + "muted")]));
}
	for (uint i = 0; i < peramitors.length(); i++) {
		if (string_contains(peramitors[i], "klangi", 1) > -1)
			klang.insert_last(string_trim_left(peramitors[i], 6));
		if (string_contains(peramitors[i], "aliasesi", 1) > -1)
			aliases.insert_last(string_trim_left(peramitors[i], 8));
		if (string_contains(peramitors[i], "script_keysi", 1) > -1)
			script_keys.insert_last(string_trim_left(peramitors[i], 12));
		if (string_contains(peramitors[i], "accountsi", 1) > -1)
			accounts.insert_last(string_trim_left(peramitors[i], 9));
		if (string_contains(peramitors[i], "soundsi", 1) > -1)
			sounds.insert_last(string_trim_left(peramitors[i], 7));
		if (string_contains(peramitors[i], "keysi", 1) > -1)
			keys.insert_last(string_to_number(string_trim_left(peramitors[i], 5)));
	}
	f.close();
}
void writeprefs() {
	file f;
	f.open(prefsdir + "/config.dat", "w");
	string[] s = {
		"name=" + name ,
		"password=" + password ,
		"voicechat=" + voicechat ,
		"audioform_keyboard_echo=" + audioform_keyboard_echo ,
		"holdv=" + holdv ,
		"mfwc=" + mfwc ,
		"repeatingcamera=" + repeatingcamera ,
		"kh=" + kh ,
		"inputhelp=" + inputhelp ,
		"saveinputbox=" + saveinputbox ,
		"volumestream=" + volumestream ,
		"mmusic_volume=" + mmusic_volume ,
		"volume=" + volume ,
		"pitch=" + pitch ,
		"have_cycle_inventory=" + have_cycle_inventory,
		"behind_pitch_decrease="+behind_pitch_decrease,
		"xx="+xx,
		"scuffs="+scuffs,
		"itemsound="+itemsound,
		"walktime="+walktime,
		"airtime="+airtime,
		"bmovetime="+bmovetime,
		"asktoexit="+asktoexit,
		"askbid="+askbid,
		"askauction="+askauction,
		"zonestatus="+zonestatus,
		"voiceindex="+voiceindex,
		"bufferbeep="+bufferbeep,
		"dreaming="+dreaming,
		"vrepeat="+v.repeat,
		"vcaps="+v.caps,
		"vkeyboardclicks="+v.keyboardclicks,
		"vkeyboardtheme="+v.keyboardtheme,
		"vkeyboardsoundforothers="+v.keyboardsoundforothers,
		"vhearotherskeyboardsound="+v.hearotherskeyboardsound,
		"vbraille_mode="+v.braille_mode,
		"pvrepeat="+pv.repeat,
		"pvcaps="+pv.caps,
		"pvkeyboardclicks="+pv.keyboardclicks,
		"pvkeyboardsoundforothers="+pv.keyboardsoundforothers,
		"pvhearotherskeyboardsound="+pv.hearotherskeyboardsound,
		"pvbraille_mode="+pv.braille_mode,
		"rules="+rules,
		"startlng="+startlng,
		"lng="+lng,
		"winsound="+winsound,
		"mouse="+mouse,
		"djoystick="+djoystick,
		"mutetts="+mutetts,
		"voice="+voice,
		"pitch="+pitch,
		"twitteraccess="+twitteraccess,
		"musictrack="+musictrack,
		"menuopen="+menuopen,
		"menuedge="+menuedge,
		"menuenter="+menuenter,
		"menuclick="+menuclick,
		"menuclose="+menuclose,
		"menuwrap="+menuwrap,
		"ouviremoutrasjanelas="+ouviremoutrasjanelas,
		"autologin="+autologin,
		"autolower="+autolower,
		"readchats="+ readchats,
		"readolmsg="+ readolmsg,
		"readdeathmsg="+ readdeathmsg,
		"chatsound="+chatsound,
		"jumpsound="+jumpsound,
		"localchatsound="+localchatsound,
		"onlinesound="+onlinesound,
		"offlinesound="+offlinesound,
		"pmsound="+pmsound,
		"chsound="+chsound,
		"lcsound="+lcsound,
		"onsound="+onsound,
		"offsound="+offsound,
		"pmsgsound="+pmsgsound,
		"lcontrol="+lcontrol,
		"rcontrol="+rcontrol,
		"lshift="+lshift,
		"rshift="+rshift,
		"lalt="+lalt,
		"ralt="+ralt,
		"defjoy="+ defjoy,
		"defjoyname="+ defjoyname,
		"stereotyping="+stereotyping,
		"braille_support="+braille_support,
		"youtube_format="+youtube_format,
		"microphone_samplerate="+microphone_samplerate,
		"microphonechannels="+microphonechannels,
		"vmode="+vmode,
		"sapiforce="+ sapiforce,
		"speak_chars="+speak_chars,
		"preloader="+preloader,
		"lastruns="+lastruns,
		"soundcard="+sound_output_device,
		"soundcardname="+soundcardname,
		"speechmode="+speechmode,
		"wrap="+wrap,
		"first_letter_navigation="+first_letter_navigation,
		"multi_letter_navigation="+multi_letter_navigation,
		"letters_autoactivate="+letters_autoactivate,
		"sidescrolling="+sidescrolling,
		"buffermode="+buffermode,
		"ssbuffermode="+ssbuffermode,
		"motdhash="+motdhash,
		"ap="+ap,
		"apl="+apl,
		"mv="+mv,
		"importbufferlogs="+importbufferlogs,
		"trackingmode="+trackingmode,
		"savevoicechats="+savevoicechats,
		"savettschats="+savettschats,
		"hearyourvoicechat="+hearyourvoicechat,
		"hearyourttschat="+hearyourttschat,
		"hearothersvoicechat="+hearothersvoicechat,
		"hearothersttschat="+hearothersttschat,
		"hearotherspmsound="+hearotherspmsound,
		"othershearyourpmsound="+othershearyourpmsound,
		"langfile="+currentlangfile,
		"keyboardlangfile="+currentkeyboardlangfile,
		"sitting="+sitting,
		"translator="+translator,
		"klangpos="+klangpos,
		"readerinterrupt="+readerinterrupt,
		"menumusvol="+menumusvol,
		"mvol="+mvol
	};
	for (int i = 0; i < buffers.length(); i++) {
	s.insert_last("b" + i + "int=" + bool_to_int(buffers[i].interrupt));
	s.insert_last("b" + i + "active=" + buffers[i].active);
	s.insert_last("b" + i + "muted=" + bool_to_int(buffers[i].muted));
}
	for (uint i = 0; i < sounds.length(); i++)
		s.insert_last("soundsi" + sounds[i] + "=" + sounds[i]);
	for (uint i = 0; i < keys.length(); i++)
		s.insert_last("keysi" + keys[i] + "=" + keys[i]);
	for (uint i = 0; i < klang.length(); i++)
		s.insert_last("klangi" + klang[i] + "=" + klang[i]);
	for (uint i = 0; i < aliases.length(); i++)
		s.insert_last("aliasesi" + aliases[i] + "=" + aliases[i]);
	for (uint i = 0; i < script_keys.length(); i++)
		s.insert_last("script_keysi" + script_keys[i] + "=" + script_keys[i]);
	for (uint i = 0; i < accounts.length(); i++)
		s.insert_last("accountsi" + accounts[i] + "=" + accounts[i]);
	string ss = string_encrypt(join(s, "\n"), "charbhoom");
	f.write(ss);
	f.close();
}
