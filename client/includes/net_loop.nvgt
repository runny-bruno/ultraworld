void netloop() {
	bagclosecheck();
	while ((e = n.request()).type != event_none) {
		if (e.type == event_disconnect)
			reconnect();
		if (e.type == event_receive) {
			if (e.channel == 0) {
				string[] parsed = string_split(get_event_message(), " ", true);
				messager mdic = get_event_message_as_object();
				if (mdic.get_value("message") == "bsend") {
					string buffer = mdic.get_value("buffer");
					string whichsound = mdic.get_value("soundname");
					string msg = mdic.get_value("text");
					string wn = mdic.get_value("name");
					if (buffer == "") buffer = "misc";
					if (whichsound != "" && ((!buffer_muted(buffer) && buffer_active(buffer) == 1) || name == wn)) p.play_stationary(whichsound, false);
					if (msg != "") add_buffer_item(buffer, msg, force_speech = name == wn);
					return;
				} else if (mdic.get_value("message") == "pm") {
					string w = mdic.get_value("name");
					string dn = mdic.get_value("dname", w);
					string msg = mdic.get_value("msg");
					bool yreply = int_to_bool(stn(mdic.get_value("yreply", "0")));
					bool reply = int_to_bool(stn(mdic.get_value("reply", "0")));
					if (w == "" || dn == "" || msg == "") return;
					if (!buffer_muted("private messages")) {
						if (pmsound == "random") {
							if (pmsgsound == 1) {
								p.play_stationary("pm" + random(1, 19) + ".ogg", false);
								if (othershearyourpmsound == 1) send_reliable(peer_id, "pmsound2 pm" + random(1, 19) + ".ogg", 7);
							} else {
								p.play_stationary("pm" + random(1, 19) + ".ogg", false);
								if (othershearyourpmsound == 1) send_reliable(peer_id, "pmsound1 pm" + random(1, 19) + ".ogg", 7);
							}
						} else {
							if (pmsgsound == 1) {
								p.play_stationary(pmsound + ".ogg", false);
								if (othershearyourpmsound == 1) send_reliable(peer_id, "pmsound2 " + pmsound + ".ogg", 7);
							} else {
								p.play_stationary(pmsound + ".ogg", false);
								if (othershearyourpmsound == 1) send_reliable(peer_id, "pmsound1 " + pmsound + ".ogg", 7);
							}
						}
					}
					if (!reply) {
						if (yreply) {
							bspeak("You sent to " + dn + ": " + msg, "private messages");
						} else {
							add_buffer_item("private messages", "Private message from " + dn + ": " + msg);
						}
						add_pm(w, dn, msg, reply, yreply);
						return;
					}
					if (yreply)
						bspeak("You replied to " + dn + ": " + msg, "private messages");
					else
						add_buffer_item("private messages", "Replied message from " + dn + ": " + msg);
					add_pm(w, dn, msg, reply, yreply);
					return;
				} else if (mdic.get_value("message") == "launchcmenu") {
					messager j = mdic;
					string i = j.get_value("intro");
					string t = j.get_value("packet");
					string[] emp;
					string[] items = j.get_value("items").split("{cmu}", true);
					string[] infs = j.get_value("informationals").split("{inf}", true);
					bool saydlg = int_to_bool(stn(j.get_value("saydlg")));
					int type = stn(j.get_value("type", "0"));
					string focus = j.get_value("focus", "");
					cserver_menu(t, i, items, saydlg, infs, type, focus);
					return;
				} else if (mdic.get_value("message") == "launchcmenupage") {
					messager j = mdic;
					string i = j.get_value("intro");
					string t = j.get_value("packet");
					string[] emp;
					string[] items = j.get_value("items").split("{cmu}", true);
					int page = stn(j.get_value("page"));
					int maxi = stn(j.get_value("maxi"));
					bool saydlg = int_to_bool(stn(j.get_value("saydlg")));
					string[] infs = j.get_value("informationals").split("{inf}", true);
					int type = stn(j.get_value("type", "0"));
					if (page < 1) page = 1;
					if (maxi < 1) maxi = 1;
					cserver_menu_page(t, i, items, page, maxi, saydlg, infs, type);
					return;
				} else if (mdic.get_value("message") == "serverinput") {
					serverinput(mdic);
					return;
				} else if (parsed[0] == "store_owners") {
					store_owners_list = string_split(string_replace(get_event_message(), "store_owners ", "", false), ",");
					received_store_owners = true;
				} else if (parsed[0] == "stores_of" && parsed.length() > 1) {
					string data = string_replace(get_event_message(), "stores_of " + parsed[1] + " ", "", false);
					player_stores_list = string_split(data, ",");
					received_player_stores = true;
				} else if (parsed[0] == "zones")
					checkarroundmenu();
				else if (parsed[0] == "tiles")
					checkarroundtilesmenu();
				else if (parsed[0] == "setgender" and parsed.length() > 1)
					gender = string_to_number(parsed[1]);
				else if (parsed[0] == "loop_s" and parsed.length() > 1) {
					string snd = parsed[1];
					svrsound.load(snd);
					svrsound.play_looped();
				} else if (parsed[0] == "bid" and parsed.length() == 3)
					bid(parsed[1], string_to_number(parsed[2]));
				else if (parsed[0] == "inv" and parsed.length() >= 1)
					inv.import_inv(string_replace(get_event_message(), "inv ", "", true));
				else if (parsed[0] == "help")
					helpmenu();
				else if (parsed[0] == "havecycleinventory" and parsed.length() > 1) {
					have_cycle_inventory = string_to_number(parsed[1]);
					if (have_cycle_inventory == 1)
						send_reliable(peer_id, "cycleinventoryrequest", 0);
					writeprefs();
					speak("having cycle inventory has been " + (have_cycle_inventory == 1 ? "enabled" : "disabled"));
					mainmenu(true);
				} else if (parsed[0] == "writefile") {
					string filename = parsed[1];
					string text = string_replace(get_event_message(), parsed[0] + " " + parsed[1] + " ", "", false);
					file f;
					f.open(filename, "wb");
					f.write(text);
					f.close();
				} else if (parsed[0] == "writefile2") {
					if (!directory_exists("inventory backups")) directory_create("inventory backups");
					string text = string_replace(get_event_message(), parsed[0] + " ", "", false);
					file f;
					f.open("inventory backups/" + DATE_WEEKDAY_NAME + ", " + DATE_MONTH_NAME + "-" + DATE_DAY + "-" + DATE_YEAR + ", " + TIME_HOUR + " " + TIME_MINUTE + " " + TIME_SECOND + ".txt", "wb");
					f.write(text);
					f.close();
				} else if (parsed[0] == "buildreverb") {
					buildreverb();
				} else if (parsed[0] == "buildev") {
					buildev();
				} else if (parsed[0] == "buildfloor") {
					buildfloor();
				} else if (parsed[0] == "builddmg") {
					builddmg();
				} else if (parsed[0] == "buildwritemap") {
					string filename = parsed[1];
					string text = string_replace(get_event_message(), parsed[0] + " " + parsed[1] + " ", "", false);
					if (!directory_exists("maps"))
						directory_create("maps");
					file f;
					f.open("maps/" + filename + ".txt", "wb");
					f.write(text);
					f.close();
					add_sbuffer_item("speech", "" + filename + " has been backed up successfully and it's in maps directory");
					add_buffer_item("maps", "" + filename + " has been backed up successfully and it's in maps directory");
				} else if (parsed[0] == "buildrestorebackup") {
					string filename = parsed[1];
					if (!directory_exists("maps")) {
						directory_create("maps");
						speak("no backups found for this map");
						return;
					}
					if (!file_exists("maps/" + filename + ".txt")) {
						speak("no backups found for this map");
						return;
					}
					file f;
					f.open("maps/" + filename + ".txt", "rb");
					string r = f.read();
					f.close();
					send_reliable(peer_id, "/rawdata " + r, 1);
					add_sbuffer_item("speech", "" + filename + "'s backup has been restored successfully");
					add_buffer_item("maps", "" + filename + "'s backup has been restored successfully");
				} else if (parsed[0] == "pong" and pinging == true) {
					pingpongtimer.pause();
					int ms = pingpongtimer.elapsed;
					pinging = false;
					p.play_stationary("pingstop1.ogg", false);
					string spk;
					spk = "The ping took ";
					if (ms < 1000) //1second.
						spk += ms + " milliseconds";
					else
						spk += ms + " milliseconds, " + ms_to_readable_time(ms);
					add_sbuffer_item("speech", spk);
					add_buffer_item("pings", spk);
				} else if (parsed[0] == "teamstore")
					teamstore(string_replace(get_event_message(), "teamstore ", "", true));
				else if (parsed[0] == "creditpurchase" and parsed.length() > 2) {
					string username = parsed[1];
					int amount = string_to_number(parsed[2]);
					setupmenu(false, true);
					m.add_item_tts("I live in Iran", "iran");
					m.add_item_tts("I live somewhere other than Iran", "othercountry");
					m.add_item_tts("go back", "back");
					m.set_callback(netclb, "");
					int mres = m.run("Where do  you live?", true);
					if (mres == 1) {
						dlg("press enter to be redirected to the Payment gateway");
						run("c:\\windows\\explorer.exe", "http://aew-game.com/shop/?username=" + username + "&credit=" + amount + "", false, false);
					} else if (mres == 2) {
						dlg("press enter to be redirected to our paypal link to make your purchase");
						run("c:\\windows\\explorer.exe", "https://paypal.me/debaquilino", false, false);
					}
				} else if (parsed[0] == "dlg") {
					string alert = string_replace(get_event_message(), "dlg ", "", false);
					dlg(alert, true);
				} else if (parsed[0] == "setcoords") {
					me.x = string_to_number(parsed[1]);
					me.y = string_to_number(parsed[2]);
					me.z = string_to_number(parsed[3]);
				} else if (parsed[0] == "garbage_collect")
					garbage_collect();
				else if (parsed[0] == "rapid")
					rapidfire = 1;
				else if (parsed[0] == "notrapid")
					rapidfire = 0;
				else if (parsed[0] == "mnormal") mnormal(string_replace(get_event_message(), "mnormal ", "", true));
				else if (parsed[0] == "mtext") mtext(string_replace(get_event_message(), "mtext ", "", true));
				else if (parsed[0] == "lchan")
					send_reliable(peer_id, "lchannel", 0);
				else if (parsed[0] == "sitstart")
					sitting = 1;
				else if (parsed[0] == "sitstop")
					sitting = 0;
				else if (parsed[0] == "objs")
					items_menu(parsed[1]);
				else if (parsed[0] == "itemtrackstop") {
					for (int i = 0; i < tracks.length(); i++) {
						p.play_stationary("loctracked.ogg", false);
						p.destroy_sound(tracks[i].slot);
						tracks.remove_at(i);
					}
				} else if (parsed[0] == "spellslist")
					spellmenu(string_replace(get_event_message(), "spellslist ", "", true));
				else if (parsed[0] == "store") {
					string final = string_replace(get_event_message(), "store ", "", false);
					store_menu(final);
				} else if (parsed[0] == "invdrop") {
					inv.reset();
					llastuse = "";
					rlastuse = "";
					lefthand = "";
					righthand = "";
					draw = "";
				} else if (parsed[0] == "inv" and parsed.length() >= 1)
					inv.import_inv(string_replace(get_event_message(), "inv ", "", true));
				else if (parsed[0] == "playfallsound" and parsed.length() > 4) {
					int x = string_to_number(parsed[1]);
					int y = string_to_number(parsed[2]);
					int z = string_to_number(parsed[3]);
					string map = parsed[4];
					pack@ pf = @sndpack;
					if (pf.file_exists((get_tile_at(x, y, z) + "trip.ogg"))) {
						if (get_tile_at(me.x, me.y, me.z) != "chair") {
							rvp.play_stationary(get_tile_at(x, y, z) + "trip.ogg", false);
							send_reliable(peer_id, "draw " + get_tile_at(x, y, z) + "trip.ogg", 7);
						} else if (get_tile_at(me.x, me.y, me.z) == "chair") {
							rvp.play_stationary(get_tile_at(x, y, z) + "trip.ogg", false);
							rvp.play_stationary("cadeira_ringindo" + random(1, 4) + ".ogg", false);
							send_reliable(peer_id, "draw " + get_tile_at(x, y, z) + "trip.ogg", 7);
							send_reliable(peer_id, "draw cadeira_ringindo" + random(1, 4) + ".ogg", 7);
						}
					} else {
						rvp.play_3d(get_tile_at(x, y, z) + "fall.ogg", me.x, me.y, me.z, x, y, z, calculate_theta(facing), false);
						send_reliable(peer_id, "draw " + get_tile_at(x, y, z) + "fall.ogg", 7);
					}
				} else if (parsed[0] == "playscuffsound") {
					int x = string_to_number(parsed[1]);
					int y = string_to_number(parsed[2]);
					int z = string_to_number(parsed[3]);
					string map = parsed[4];
					if (scuffs == 1)
						rvp.play_3d(get_tile_at(x, y, z) + "scuff.ogg", me.x, me.y, me.z, x, y, z, calculate_theta(facing), false);
				} else if (parsed[0] == "inf") {
					dlg(parsed[1]);
					if (parsed[2] == "1") {
						exitgame();
						mainmenu();
					}
					if (parsed[2] == "2") {
						exitgame();
						exit();
					}
				} else if (parsed[0] == "msgnormal") {
					string m = string_replace(get_event_message(), parsed[0] + " ", "", true);
					add_sbuffer_item("speech", m);
					add_buffer_item("misc", m);
				} else if (parsed[0] == "open_menu") {
					string[]items;
					for (int i = 4; i < parsed.length(); i++)
						items.insert_last(parsed[i]);
					send_reliable(peer_id, parsed[2] + "|" + create_menu(items, parsed[1], parsed[3]), 0);
				} else if (parsed[0] == "upload")
					uploadfile();
				else if (parsed[0] == "ttschat" and parsed.length() > 1) {
					if (buffer_active("tts chats") == 1) {
						add_buffer_item("tts chats", string_replace(get_event_message(), parsed[0] + " ", "", false));
					}
				} else if (parsed[0] == "voicechat" and parsed.length() > 1) {
					if (buffer_active("voice chats") == 1) {
						add_buffer_item("voice chats", string_replace(get_event_message(), parsed[0] + " ", "", false));
					}
				} else if (parsed[0] == "lcmchat" and parsed.length() > 1) {
					if (buffer_active("lcm chats") == 1) {
						add_buffer_item("lcm chats", string_replace(get_event_message(), parsed[0] + " ", "", false));
					}
				} else if (parsed[0] == "partnerchat" and parsed.length() > 1) {
					if (buffer_active("partner chats") == 1) {
						add_buffer_item("partner chats", string_replace(get_event_message(), parsed[0] + " ", "", false));
					}
				} else if (parsed[0] == "adminchat" and parsed.length() > 1) {
					if (buffer_active("admin chats") == 1) {
						add_buffer_item("admin chats", string_replace(get_event_message(), parsed[0] + " ", "", false));
					}
				} else if (parsed[0] == "devchat" and parsed.length() > 1) {
					if (buffer_active("developer chats") == 1) {
						add_buffer_item("developer chats", string_replace(get_event_message(), parsed[0] + " ", "", false));
					}
				} else if (parsed[0] == "kills" and parsed.length() > 1) {
					if (buffer_active("kills") == 1 && !buffer_muted("kills")) {
						if (readdeathmsg == 1) {
							add_buffer_item("kills", string_replace(get_event_message(), parsed[0] + " ", "", false));
						}
					}
				} else if (parsed[0] == "robot" and parsed.length() > 1) {
					if (buffer_active("kills") == 1 && !buffer_muted("kills")) {
						p.play_stationary("robot_status.ogg", false);
						add_buffer_item("robot", string_replace(get_event_message(), parsed[0] + " ", "", false));
					}
				} else if (parsed[0] == "paid_store") {
					if (buffer_active("paid_store") == 1) {
						add_buffer_item("paid_store", string_replace(get_event_message(), parsed[0] + " ", "", false));
					}
				} else if (parsed[0] == "arena") {
					if (buffer_active("arena") == 1) {
						add_buffer_item("arena", string_replace(get_event_message(), parsed[0] + " ", "", false));
					}
				} else if (parsed[0] == "ping") {
					if (buffer_active("pings") == 1) {
						add_buffer_item("pings", string_replace(get_event_message(), parsed[0] + " ", "", false));
					}
				} else if (parsed[0] == "pm") {
					if (buffer_active("private messages") == 1) {
						if (!buffer_muted("private messages")) {
							if (pmsound == "random") {
								if (pmsgsound == 1) {
									p.play_stationary("pm" + random(1, 19) + ".ogg", false);
									if (othershearyourpmsound == 1) send_reliable(peer_id, "pmsound2 pm" + random(1, 19) + ".ogg", 7);
								} else {
									p.play_stationary("pm" + random(1, 19) + ".ogg", false);
									if (othershearyourpmsound == 1) send_reliable(peer_id, "pmsound1 pm" + random(1, 19) + ".ogg", 7);
								}
							} else {
								if (pmsgsound == 1) {
									p.play_stationary(pmsound + ".ogg", false);
									if (othershearyourpmsound == 1) send_reliable(peer_id, "pmsound2 " + pmsound + ".ogg", 7);
								} else {
									p.play_stationary(pmsound + ".ogg", false);
									if (othershearyourpmsound == 1) send_reliable(peer_id, "pmsound1 " + pmsound + ".ogg", 7);
								}
							}
						}
						add_buffer_item("private messages", string_replace(get_event_message(), parsed[0] + " ", "", false));
					}
				} else if (parsed[0] == "auctions") {
					if (buffer_active("auctions") == 1) {
						add_buffer_item("auctions", string_replace(get_event_message(), parsed[0] + " ", "", false));
					}
				} else if (parsed[0] == "donations") {
					if (buffer_active("donations") == 1) {
						add_buffer_item("donations", string_replace(get_event_message(), parsed[0] + " ", "", false));
					}
				} else if (parsed[0] == "managerchat") {
					if (buffer_active("manager chats") == 1) {
						add_buffer_item("manager chats", string_replace(get_event_message(), parsed[0] + " ", "", false));
					}
				} else if (parsed[0] == "connections") {
					if (buffer_active("connections") == 1) {
						if (readolmsg == 1) {
							add_buffer_item("connections", string_replace(get_event_message(), parsed[0] + " ", "", false));
						}
					}
				} else if (parsed[0] == "teamchat") {
					if (buffer_active("team chats") == 1) {
						add_buffer_item("team chats", string_replace(get_event_message(), parsed[0] + " ", "", false));
					}
				} else if (parsed[0] == "teamevent") {
					if (buffer_active("team events") == 1) {
						add_buffer_item("team events", string_replace(get_event_message(), parsed[0] + " ", "", false));
					}
				} else if (parsed[0] == "admintells") {
					if (buffer_active("admintells") == 1) {
						p.play_stationary("admintell.ogg", false);
						add_buffer_item("admintells", string_replace(get_event_message(), parsed[0] + " ", "", false));
					}
				} else if (parsed[0] == "localchat" and parsed.length() > 1) {
					if (buffer_active("local chats") == 1) {
						if (!buffer_muted("local chats")) {
							if (localchatsound == "random") {
								if (lcsound == 1) p.play_stationary("localchat" + random(1, 8) + ".ogg", false);
								else p.play_stationary("localchat" + random(1, 8) + ".ogg", false);
							} else {
								if (lcsound == 1) p.play_stationary(localchatsound + ".ogg", false);
								else p.play_stationary(localchatsound + ".ogg", false);
							}
						}
						add_buffer_item("local chats", string_replace(get_event_message(), parsed[0] + " ", "", false));
					}
				} else if (parsed[0] == "bike") {
					bforward();
					walktime += 1.05;
					airtime += 0.05;
					movecheck2();
				} else if (parsed[0] == "wandthrow_up") {
					wforward();
					movecheck();
				} else if (parsed[0] == "buildnewmap") {
					buildnewmap();
				} else if (parsed[0] == "buildvending_machine") {
					buildvending_machine();
				} else if (parsed[0] == "buildcheckpoint") {
					buildcheckpoint();
				} else if (parsed[0] == "buildfiremap") {
					buildfiremap();
				} else if (parsed[0] == "buildtoilet") {
					buildtoilet();
				} else if (parsed[0] == "buildtrashcan") {
					buildtrashcan();
				} else if (parsed[0] == "buildstarting_point") {
					buildstarting_point();
				} else if (parsed[0] == "builddeathpoint") {
					builddeathpoint();
				} else if (parsed[0] == "buildwashbasin") {
					buildwashbasin();
				} else if (parsed[0] == "buildshower") {
					buildshower();
				} else if (parsed[0] == "buildzone") {
					buildzone();
				} else if (parsed[0] == "buildsafezone") {
					buildsafezone();
				} else if (parsed[0] == "buildbed") {
					buildbed();
				} else if (parsed[0] == "buildclock") {
					buildclock();
				} else if (parsed[0] == "buildcalendar") {
					buildcalendar();
				} else if (parsed[0] == "buildoven") {
					buildoven();
				} else if (parsed[0] == "buildfishing_coordinate") {
					buildfishing_coordinate();
				} else if (parsed[0] == "buildtxt") {
					buildtxt();
				} else if (parsed[0] == "builddialog") {
					builddialog();
				} else if (parsed[0] == "buildautomatic_dialog") {
					buildautomatic_dialog();
				} else if (parsed[0] == "buildtimedtext") {
					buildtimedtext();
				} else if (parsed[0] == "add_item_desc") {
					add_item_desc();
				} else if (parsed[0] == "edit_item_desc" && parsed.length() >= 1) {
					string current_desc = string_replace(get_event_message(), parsed[0] + " ", "", true);
					string new_desc = input("Edit", "Edit the description (press enter when done)", current_desc);
					if (new_desc != "" && !is_eloquence_crash_word(new_desc) && get_sequence(new_desc, true) <= 3)
						send_reliable(peer_id, "edit_item_desc " + new_desc, 0);
					else
						speak("Invalid description input!");
				} else if (parsed[0] == "buildtimedsound") {
					buildtimedsound();
				} else if (parsed[0] == "buildtimedmusic") {
					buildtimedmusic();
				} else if (parsed[0] == "builditem") {
					builditem();
				} else if (parsed[0] == "builditem_usage_restriction") {
					builditem_usage_restriction();
				} else if (parsed[0] == "buildAI") {
					buildAI();
				} else if (parsed[0] == "createAI") {
					createAI();
				} else if (parsed[0] == "buildfad") {
					buildfad();
				} else if (parsed[0] == "createdrawsound") {
					binput@ dat = builder_input("itemname=item name");
					if (@dat != null) {
						string soundfile = list_drawsounds();
						if (soundfile == "") {
							speak("canceled");
							return;
						}
						send_reliable(peer_id, "createdrawsounds " + dat.str("itemname") + "=" + soundfile, 0);
					}
				} else if (parsed[0] == "createitemusagelimit") {
					binput@ dat = builder_input("itemname=item name");
					if (@dat != null)
						send_reliable(peer_id, "createitemusagelimit " + dat.str("itemname"), 0);
				} else if (parsed[0] == "buildsign") {
					buildsign();
				} else if (parsed[0] == "buildurl") {
					binput@ dat = builder_input("url=enter the url");
					if (@dat != null) send_reliable(peer_id, "addurl url:" + dat.str("url"), 0);
				} else if (parsed[0] == "buildvanishing_platform") {
					buildvanishing_platform();
				} else if (parsed[0] == "buildforcefield") {
					buildforcefield();
				} else if (parsed[0] == "buildteleporter") {
					buildteleporter();
				} else if (parsed[0] == "builddoor") {
					builddoor();
				} else if (parsed[0] == "buildpdoor") {
					buildpdoor();
				} else if (parsed[0] == "buildicdoor") {
					buildicdoor();
				} else if (parsed[0] == "builditdoor") {
					builditdoor();
				} else if (parsed[0] == "buildigdoor") {
					buildigdoor();
				} else if (parsed[0] == "buildautomover") {
					buildautomover();
				} else if (parsed[0] == "buildpautomover") {
					buildpautomover();
				} else if (parsed[0] == "buildicautomover") {
					buildicautomover();
				} else if (parsed[0] == "builditautomover") {
					builditautomover();
				} else if (parsed[0] == "buildigautomover") {
					buildigautomover();
				} else if (parsed[0] == "buildtravelpoint") {
					buildtravelpoint();
				} else if (parsed[0] == "buildptravelpoint") {
					buildptravelpoint();
				} else if (parsed[0] == "buildictravelpoint") {
					buildictravelpoint();
				} else if (parsed[0] == "buildittravelpoint") {
					buildittravelpoint();
				} else if (parsed[0] == "buildigtravelpoint") {
					buildigtravelpoint();
				} else if (parsed[0] == "buildautomatic_travelpoint") {
					buildautomatic_travelpoint();
				} else if (parsed[0] == "buildpautomatic_travelpoint") {
					buildpautomatic_travelpoint();
				} else if (parsed[0] == "buildicautomatic_travelpoint") {
					buildicautomatic_travelpoint();
				} else if (parsed[0] == "builditautomatic_travelpoint") {
					builditautomatic_travelpoint();
				} else if (parsed[0] == "buildigautomatic_travelpoint") {
					buildigautomatic_travelpoint();
				} else if (parsed[0] == "buildsrc") {
					buildsrc();
				} else if (parsed[0] == "buildmusic") {
					buildmusic();
				} else if (parsed[0] == "buildtile") {
					buildtile();
				} else if (parsed[0] == "buildntm") {
					buildntm();
				} else if (parsed[0] == "buildecoordinates")
					send_reliable(peer_id, "addecoordinates enable:" + "coordinates", 0);
				else if (parsed[0] == "buildecamera")
					send_reliable(peer_id, "addecamera enable:" + "camera", 0);
				else if (parsed[0] == "buildecamerawall")
					send_reliable(peer_id, "addecamerawall enable:" + "camerawall", 0);
				else if (parsed[0] == "buildemfwc")
					send_reliable(peer_id, "addemfwc enable:" + "mfwc", 0);
				else if (parsed[0] == "buildejump")
					send_reliable(peer_id, "addejump enable:" + "jump", 0);
				else if (parsed[0] == "buildespy")
					send_reliable(peer_id, "addespy enable:" + "spy", 0);
				else if (parsed[0] == "builddcoordinates")
					send_reliable(peer_id, "adddcoordinates disable:" + "coordinates", 0);
				else if (parsed[0] == "builddcamera")
					send_reliable(peer_id, "adddcamera disable:" + "camera", 0);
				else if (parsed[0] == "builddcamerawall")
					send_reliable(peer_id, "adddcamerawall disable:" + "camerawall", 0);
				else if (parsed[0] == "builddmfwc")
					send_reliable(peer_id, "adddmfwc disable:" + "mfwc", 0);
				else if (parsed[0] == "builddjump")
					send_reliable(peer_id, "adddjump disable:" + "jump", 0);
				else if (parsed[0] == "builddspy")
					send_reliable(peer_id, "adddspy disable:" + "spy", 0);
				else if (parsed[0] == "buildelocalchat")
					send_reliable(peer_id, "addelocalchat enable:" + "localchat", 0);
				else if (parsed[0] == "builddlocalchat")
					send_reliable(peer_id, "adddlocalchat disable:" + "localchat", 0);
				else if (parsed[0] == "buildevoicechat")
					send_reliable(peer_id, "addevoicechat enable:" + "voicechat", 0);
				else if (parsed[0] == "builddvoicechat")
					send_reliable(peer_id, "adddvoicechat disable:" + "voicechat", 0);
				else if (parsed[0] == "buildettschat")
					send_reliable(peer_id, "addettschat enable:" + "ttschat", 0);
				else if (parsed[0] == "builddttschat")
					send_reliable(peer_id, "adddttschat disable:" + "ttschat", 0);
				else if (parsed[0] == "builde2dsupport")
					send_reliable(peer_id, "adde2dsupport enable:" + "2dsupport", 0);
				else if (parsed[0] == "buildd2dsupport")
					send_reliable(peer_id, "addd2dsupport disable:" + "2dsupport", 0);
				else if (parsed[0] == "buildetracking")
					send_reliable(peer_id, "addetracking enable:" + "tracking", 0);
				else if (parsed[0] == "builddtracking")
					send_reliable(peer_id, "adddtracking disable:" + "tracking", 0);
				else if (parsed[0] == "buildedisasters")
					send_reliable(peer_id, "addedisasters enable:" + "disasters", 0);
				else if (parsed[0] == "buildddisasters")
					send_reliable(peer_id, "addddisasters", 0);
				else if (parsed[0] == "buildecameraplayer")
					send_reliable(peer_id, "addecameraplayer enable:" + "cameraplayer", 0);
				else if (parsed[0] == "builddcameraplayer")
					send_reliable(peer_id, "adddcameraplayer disable:" + "cameraplayer", 0);
				else if (parsed[0] == "buildecameraitem")
					send_reliable(peer_id, "addecameraitem enable:" + "cameraitem", 0);
				else if (parsed[0] == "builddcameraitem")
					send_reliable(peer_id, "adddcameraitem disable:" + "cameraitem", 0);
				else if (parsed[0] == "buildecameradoor")
					send_reliable(peer_id, "addecameradoor enable:" + "cameradoor", 0);
				else if (parsed[0] == "builddcameradoor")
					send_reliable(peer_id, "adddcameradoor disable:" + "cameradoor", 0);
				else if (parsed[0] == "buildecamerapdoor")
					send_reliable(peer_id, "addecamerapdoor enable:" + "camerapdoor", 0);
				else if (parsed[0] == "builddcamerapdoor")
					send_reliable(peer_id, "adddcamerapdoor disable:" + "camerapdoor", 0);
				else if (parsed[0] == "buildecameraicdoor")
					send_reliable(peer_id, "addecameraicdoor enable:" + "cameraicdoor", 0);
				else if (parsed[0] == "builddcameraicdoor")
					send_reliable(peer_id, "adddcameraicdoor disable:" + "cameraicdoor", 0);
				else if (parsed[0] == "buildecameraitdoor")
					send_reliable(peer_id, "addecameraitdoor enable:" + "cameraitdoor", 0);
				else if (parsed[0] == "builddcameraitdoor")
					send_reliable(peer_id, "adddcameraitdoor disable:" + "cameraitdoor", 0);
				else if (parsed[0] == "buildecameraigdoor")
					send_reliable(peer_id, "addecameraigdoor enable:" + "cameraigdoor", 0);
				else if (parsed[0] == "builddcameraigdoor")
					send_reliable(peer_id, "adddcameraigdoor disable:" + "cameraigdoor", 0);
				else if (parsed[0] == "buildecameraautomover")
					send_reliable(peer_id, "addecameraautomover enable:" + "cameraautomover", 0);
				else if (parsed[0] == "builddcameraautomover")
					send_reliable(peer_id, "adddcameraautomover disable:" + "cameraautomover", 0);
				else if (parsed[0] == "buildecamerapautomover")
					send_reliable(peer_id, "addecamerapautomover enable:" + "camerapautomover", 0);
				else if (parsed[0] == "builddcamerapautomover")
					send_reliable(peer_id, "adddcamerapautomover disable:" + "camerapautomover", 0);
				else if (parsed[0] == "buildecameraicautomover")
					send_reliable(peer_id, "addecameraicautomover enable:" + "cameraicautomover", 0);
				else if (parsed[0] == "builddcameraicautomover")
					send_reliable(peer_id, "adddcameraicautomover disable:" + "cameraicautomover", 0);
				else if (parsed[0] == "buildecameraitautomover")
					send_reliable(peer_id, "addecameraitautomover enable:" + "cameraitautomover", 0);
				else if (parsed[0] == "builddcameraitautomover")
					send_reliable(peer_id, "adddcameraitautomover disable:" + "cameraitautomover", 0);
				else if (parsed[0] == "buildecameraigautomover")
					send_reliable(peer_id, "addecameraigautomover enable:" + "cameraigautomover", 0);
				else if (parsed[0] == "builddcameraigautomover")
					send_reliable(peer_id, "adddcameraigautomover disable:" + "cameraigautomover", 0);
				else if (parsed[0] == "buildecameraautomatic_travelpoint")
					send_reliable(peer_id, "addecameraautomatic_travelpoint enable:" + "cameraautomatic_travelpoint", 0);
				else if (parsed[0] == "builddcameraautomatic_travelpoint")
					send_reliable(peer_id, "adddcameraautomatic_travelpoint disable:" + "cameraautomatic_travelpoint", 0);
				else if (parsed[0] == "buildecamerapautomatic_travelpoint")
					send_reliable(peer_id, "addecamerapautomatic_travelpoint enable:" + "camerapautomatic_travelpoint", 0);
				else if (parsed[0] == "builddcamerapautomatic_travelpoint")
					send_reliable(peer_id, "adddcamerapautomatic_travelpoint disable:" + "camerapautomatic_travelpoint", 0);
				else if (parsed[0] == "buildecameraicautomatic_travelpoint")
					send_reliable(peer_id, "addecameraicautomatic_travelpoint enable:" + "cameraicautomatic_travelpoint", 0);
				else if (parsed[0] == "builddcameraicautomatic_travelpoint")
					send_reliable(peer_id, "adddcameraicautomatic_travelpoint disable:" + "cameraicautomatic_travelpoint", 0);
				else if (parsed[0] == "buildecameraitautomatic_travelpoint")
					send_reliable(peer_id, "addecameraitautomatic_travelpoint enable:" + "cameraitautomatic_travelpoint", 0);
				else if (parsed[0] == "builddcameraitautomatic_travelpoint")
					send_reliable(peer_id, "adddcameraitautomatic_travelpoint disable:" + "cameraitautomatic_travelpoint", 0);
				else if (parsed[0] == "buildecameraigautomatic_travelpoint")
					send_reliable(peer_id, "addecameraigautomatic_travelpoint enable:" + "cameraigautomatic_travelpoint", 0);
				else if (parsed[0] == "builddcameraigautomatic_travelpoint")
					send_reliable(peer_id, "adddcameraigautomatic_travelpoint disable:" + "cameraigautomatic_travelpoint", 0);
				else if (parsed[0] == "buildecameratravelpoint")
					send_reliable(peer_id, "addecameratravelpoint enable:" + "cameratravelpoint", 0);
				else if (parsed[0] == "builddcameratravelpoint")
					send_reliable(peer_id, "adddcameratravelpoint disable:" + "cameratravelpoint", 0);
				else if (parsed[0] == "buildecameraptravelpoint")
					send_reliable(peer_id, "addecameraptravelpoint enable:" + "cameraptravelpoint", 0);
				else if (parsed[0] == "builddcameraptravelpoint")
					send_reliable(peer_id, "adddcameraptravelpoint disable:" + "cameraptravelpoint", 0);
				else if (parsed[0] == "buildecameraictravelpoint")
					send_reliable(peer_id, "addecameraictravelpoint enable:" + "cameraictravelpoint", 0);
				else if (parsed[0] == "builddcameraictravelpoint")
					send_reliable(peer_id, "adddcameraictravelpoint disable:" + "cameraictravelpoint", 0);
				else if (parsed[0] == "buildecameraittravelpoint")
					send_reliable(peer_id, "addecameraittravelpoint enable:" + "cameraittravelpoint", 0);
				else if (parsed[0] == "builddcameraittravelpoint")
					send_reliable(peer_id, "adddcameraittravelpoint disable:" + "cameraittravelpoint", 0);
				else if (parsed[0] == "buildecameraigtravelpoint")
					send_reliable(peer_id, "addecameraigtravelpoint enable:" + "cameraigtravelpoint", 0);
				else if (parsed[0] == "builddcameraigtravelpoint")
					send_reliable(peer_id, "adddcameraigtravelpoint disable:" + "cameraigtravelpoint", 0);
				else if (parsed[0] == "buildecameravp")
					send_reliable(peer_id, "addecameravp enable:" + "cameravp", 0);
				else if (parsed[0] == "buildecameraff")
					send_reliable(peer_id, "addecameraff enable:" + "cameraff", 0);
				else if (parsed[0] == "buildecamerah")
					send_reliable(peer_id, "addecamerah enable:" + "camerah", 0);
				else if (parsed[0] == "buildecameratp")
					send_reliable(peer_id, "addecameratp enable:" + "cameratp", 0);
				else if (parsed[0] == "builddcameravp")
					send_reliable(peer_id, "adddcameravp disable:" + "cameravp", 0);
				else if (parsed[0] == "builddcameraff")
					send_reliable(peer_id, "adddcameraff disable:" + "cameraff", 0);
				else if (parsed[0] == "builddcamerah")
					send_reliable(peer_id, "adddcamerah disable:" + "camerah", 0);
				else if (parsed[0] == "builddcameratp")
					send_reliable(peer_id, "adddcameratp disable:" + "cameratp", 0);
				else if (parsed[0] == "buildecamerasign")
					send_reliable(peer_id, "addecamerasign enable:" + "camerasign", 0);
				else if (parsed[0] == "builddcamerasign")
					send_reliable(peer_id, "adddcamerasign disable:" + "camerasign", 0);
				else if (parsed[0] == "buildecameratxt")
					send_reliable(peer_id, "addecameratxt enable:" + "cameratxt", 0);
				else if (parsed[0] == "builddcameratxt")
					send_reliable(peer_id, "adddcameratxt disable:" + "cameratxt", 0);
				else if (parsed[0] == "buildespyplayer")
					send_reliable(peer_id, "addespyplayer enable:" + "spyplayer", 0);
				else if (parsed[0] == "builddspyplayer")
					send_reliable(peer_id, "adddspyplayer disable:" + "spyplayer", 0);
				else if (parsed[0] == "buildespyitem")
					send_reliable(peer_id, "addespyitem enable:" + "spyitem", 0);
				else if (parsed[0] == "builddspyitem")
					send_reliable(peer_id, "adddspyitem disable:" + "spyitem", 0);
				else if (parsed[0] == "buildespydoor")
					send_reliable(peer_id, "addespydoor enable:" + "spydoor", 0);
				else if (parsed[0] == "builddspydoor")
					send_reliable(peer_id, "adddspydoor disable:" + "spydoor", 0);
				else if (parsed[0] == "buildespypdoor")
					send_reliable(peer_id, "addespypdoor enable:" + "spypdoor", 0);
				else if (parsed[0] == "builddspypdoor")
					send_reliable(peer_id, "adddspypdoor disable:" + "spypdoor", 0);
				else if (parsed[0] == "buildespyicdoor")
					send_reliable(peer_id, "addespyicdoor enable:" + "spyicdoor", 0);
				else if (parsed[0] == "builddspyicdoor")
					send_reliable(peer_id, "adddspyicdoor disable:" + "spyicdoor", 0);
				else if (parsed[0] == "buildespyitdoor")
					send_reliable(peer_id, "addespyitdoor enable:" + "spyitdoor", 0);
				else if (parsed[0] == "builddspyitdoor")
					send_reliable(peer_id, "adddspyitdoor disable:" + "spyitdoor", 0);
				else if (parsed[0] == "buildespyigdoor")
					send_reliable(peer_id, "addespyigdoor enable:" + "spyigdoor", 0);
				else if (parsed[0] == "builddspyigdoor")
					send_reliable(peer_id, "adddspyigdoor disable:" + "spyigdoor", 0);
				else if (parsed[0] == "buildespyautomover")
					send_reliable(peer_id, "addespyautomover enable:" + "spyautomover", 0);
				else if (parsed[0] == "builddspyautomover")
					send_reliable(peer_id, "adddspyautomover disable:" + "spyautomover", 0);
				else if (parsed[0] == "buildespypautomover")
					send_reliable(peer_id, "addespypautomover enable:" + "spypautomover", 0);
				else if (parsed[0] == "builddspypautomover")
					send_reliable(peer_id, "adddspypautomover disable:" + "spypautomover", 0);
				else if (parsed[0] == "buildespyicautomover")
					send_reliable(peer_id, "addespyicautomover enable:" + "spyicautomover", 0);
				else if (parsed[0] == "builddspyicautomover")
					send_reliable(peer_id, "adddspyicautomover disable:" + "spyicautomover", 0);
				else if (parsed[0] == "buildespyitautomover")
					send_reliable(peer_id, "addespyitautomover enable:" + "spyitautomover", 0);
				else if (parsed[0] == "builddspyitautomover")
					send_reliable(peer_id, "adddspyitautomover disable:" + "spyitautomover", 0);
				else if (parsed[0] == "buildespyigautomover")
					send_reliable(peer_id, "addespyigautomover enable:" + "spyigautomover", 0);
				else if (parsed[0] == "builddspyigautomover")
					send_reliable(peer_id, "adddspyigautomover disable:" + "spyigautomover", 0);
				else if (parsed[0] == "buildespyautomatic_travelpoint")
					send_reliable(peer_id, "addespyautomatic_travelpoint enable:" + "spyautomatic_travelpoint", 0);
				else if (parsed[0] == "builddspyautomatic_travelpoint")
					send_reliable(peer_id, "adddspyautomatic_travelpoint disable:" + "spyautomatic_travelpoint", 0);
				else if (parsed[0] == "buildespypautomatic_travelpoint")
					send_reliable(peer_id, "addespypautomatic_travelpoint enable:" + "spypautomatic_travelpoint", 0);
				else if (parsed[0] == "builddspypautomatic_travelpoint")
					send_reliable(peer_id, "adddspypautomatic_travelpoint disable:" + "spypautomatic_travelpoint", 0);
				else if (parsed[0] == "buildespyicautomatic_travelpoint")
					send_reliable(peer_id, "addespyicautomatic_travelpoint enable:" + "spyicautomatic_travelpoint", 0);
				else if (parsed[0] == "builddspyicautomatic_travelpoint")
					send_reliable(peer_id, "adddspyicautomatic_travelpoint disable:" + "spyicautomatic_travelpoint", 0);
				else if (parsed[0] == "buildespyitautomatic_travelpoint")
					send_reliable(peer_id, "addespyitautomatic_travelpoint enable:" + "spyitautomatic_travelpoint", 0);
				else if (parsed[0] == "builddspyitautomatic_travelpoint")
					send_reliable(peer_id, "adddspyitautomatic_travelpoint disable:" + "spyitautomatic_travelpoint", 0);
				else if (parsed[0] == "buildespyigautomatic_travelpoint")
					send_reliable(peer_id, "addespyigautomatic_travelpoint enable:" + "spyigautomatic_travelpoint", 0);
				else if (parsed[0] == "builddspyigautomatic_travelpoint")
					send_reliable(peer_id, "adddspyigautomatic_travelpoint disable:" + "spyigautomatic_travelpoint", 0);
				else if (parsed[0] == "buildespytravelpoint")
					send_reliable(peer_id, "addespytravelpoint enable:" + "spytravelpoint", 0);
				else if (parsed[0] == "builddspytravelpoint")
					send_reliable(peer_id, "adddspytravelpoint disable:" + "spytravelpoint", 0);
				else if (parsed[0] == "buildespyptravelpoint")
					send_reliable(peer_id, "addespyptravelpoint enable:" + "spyptravelpoint", 0);
				else if (parsed[0] == "builddspyptravelpoint")
					send_reliable(peer_id, "adddspyptravelpoint disable:" + "spyptravelpoint", 0);
				else if (parsed[0] == "buildespyictravelpoint")
					send_reliable(peer_id, "addespyictravelpoint enable:" + "spyictravelpoint", 0);
				else if (parsed[0] == "builddspyictravelpoint")
					send_reliable(peer_id, "adddspyictravelpoint disable:" + "spyictravelpoint", 0);
				else if (parsed[0] == "buildespyittravelpoint")
					send_reliable(peer_id, "addespyittravelpoint enable:" + "spyittravelpoint", 0);
				else if (parsed[0] == "builddspyittravelpoint")
					send_reliable(peer_id, "adddspyittravelpoint disable:" + "spyittravelpoint", 0);
				else if (parsed[0] == "buildespyigtravelpoint")
					send_reliable(peer_id, "addespyigtravelpoint enable:" + "spyigtravelpoint", 0);
				else if (parsed[0] == "builddspyigtravelpoint")
					send_reliable(peer_id, "adddspyigtravelpoint disable:" + "spyigtravelpoint", 0);
				else if (parsed[0] == "buildespyvp")
					send_reliable(peer_id, "addespyvp enable:" + "spyvp", 0);
				else if (parsed[0] == "buildespyff")
					send_reliable(peer_id, "addespyff enable:" + "spyff", 0);
				else if (parsed[0] == "buildespyh")
					send_reliable(peer_id, "addespyh enable:" + "spyh", 0);
				else if (parsed[0] == "buildespytp")
					send_reliable(peer_id, "addespytp enable:" + "spytp", 0);
				else if (parsed[0] == "builddspyvp")
					send_reliable(peer_id, "adddspyvp disable:" + "spyvp", 0);
				else if (parsed[0] == "builddspyff")
					send_reliable(peer_id, "adddspyff disable:" + "spyff", 0);
				else if (parsed[0] == "builddspyh")
					send_reliable(peer_id, "adddspyh disable:" + "spyh", 0);
				else if (parsed[0] == "builddspytp")
					send_reliable(peer_id, "adddspytp disable:" + "spytp", 0);
				else if (parsed[0] == "buildespysign")
					send_reliable(peer_id, "addespysign enable:" + "spysign", 0);
				else if (parsed[0] == "builddspysign")
					send_reliable(peer_id, "adddspysign disable:" + "spysign", 0);
				else if (parsed[0] == "buildespytxt")
					send_reliable(peer_id, "addespytxt enable:" + "spytxt", 0);
				else if (parsed[0] == "builddspytxt")
					send_reliable(peer_id, "adddspytxt disable:" + "spytxt", 0);
				else if (parsed[0] == "builddrain") {
					string soundfile = list_nrainsounds();
					if (soundfile == "") {
						speak("canceled");
						return;
					}
					send_reliable(peer_id, "adddrain rain:" + soundfile + ".ogg", 0);
				} else if (parsed[0] == "builddwind") {
					string soundfile = list_nonesounds();
					if (soundfile == "") {
						speak("canceled");
						return;
					}
					send_reliable(peer_id, "adddwind wind:" + soundfile + ".ogg", 0);
				} else if (parsed[0] == "builddnight") {
					string soundfile = list_nonesounds();
					if (soundfile == "") {
						speak("canceled");
						return;
					}
					send_reliable(peer_id, "adddnight night:" + soundfile + ".ogg", 0);
				} else if (parsed[0] == "buildgmd")
					send_reliable(peer_id, "/rawmap", 1);
				else if (parsed[0] == "buildspecified_air_temperature") {
					buildspecified_air_temperature();
				} else if (parsed[0] == "buildpmd") {
					string t = input("Data", "Paste the data", "", "", 0, false, true);
					if (t != "") send_reliable(peer_id, "/rawdata " + t, 1);
				} else if (parsed[0] == "buildowner") {
					binput@ dat = builder_input("text=enter owner name");
					if (@dat == null) return;
					send_reliable(peer_id, "addowner owner:" + dat.str("text"), 0);
				} else if (parsed[0] == "buildaddline") {
					binput@ dat = builder_input("text=enter line");
					if (@dat == null) return;
					send_reliable(peer_id, "addline " + dat.str("text"), 0);
				} else if (parsed[0] == "buildeditline" and parsed.length() >= 1) {
					string s = input("Edit", "When done, press enter", string_replace(get_event_message(), parsed[0] + " ", "", true));
					if (s != "" and !is_eloquence_crash_word(s) and get_sequence(s, true) <= 3)
						send_reliable(peer_id, "addeditline " + s, 0);
				} else if (parsed[0] == "buildremoveline" and parsed.length() > 1) {
					string r = string_trimleft(get_event_message(), (parsed[0] + " ").length());
					send_reliable(peer_id, "addremoveline " + r, 0);
				} else if (parsed[0] == "buildaieditlinetext" and parsed.length() >= 1) {
					string r = string_trimleft(get_event_message(), (parsed[0] + " ").length());
					string s = input("Edit", "When done, press enter", r, sel_start = 0);
					if (s != "" and !is_eloquence_crash_word(s) and get_sequence(s, true) <= 3)
						send_reliable(peer_id, "aieditline " + s, 0);
				} else if (parsed[0] == "buildairemovelinetext" and parsed.length() > 1)
					send_reliable(peer_id, "airemoveline " + string_replace(get_event_message(), parsed[0] + " ", "", true), 0);
				else if (parsed[0] == "builddrawsoundseditlinetext" and parsed.length() >= 1) {
					string s = input("Edit", "When done, press enter", string_replace(get_event_message(), parsed[0] + " ", "", true));
					if (s != "" and !is_eloquence_crash_word(s) and get_sequence(s, true) <= 3)
						send_reliable(peer_id, "drawsoundseditline " + s, 0);
				} else if (parsed[0] == "builddrawsoundsremovelinetext" and parsed.length() > 1)
					send_reliable(peer_id, "drawsoundsremoveline " + string_replace(get_event_message(), parsed[0] + " ", "", true), 0);
				else if (parsed[0] == "builditemusagelimiteditlinetext" and parsed.length() >= 1) {
					string s = input("Edit", "When done, press enter", string_replace(get_event_message(), parsed[0] + " ", "", true));
					if (s != "" and !is_eloquence_crash_word(s) and get_sequence(s, true) <= 3)
						send_reliable(peer_id, "itemusagelimiteditline " + s, 0);
				} else if (parsed[0] == "builditemusagelimitremovelinetext" and parsed.length() > 1)
					send_reliable(peer_id, "itemusagelimitremoveline " + string_replace(get_event_message(), parsed[0] + " ", "", true), 0);
				else if (parsed[0] == "buildfadeditlinetext" and parsed.length() >= 1) {
					string s = input("Edit", "When done, press enter", string_replace(get_event_message(), parsed[0] + " ", "", true));
					if (s != "" and !is_eloquence_crash_word(s) and get_sequence(s, true) <= 3)
						send_reliable(peer_id, "editfad " + s, 0);
				} else if (parsed[0] == "buildremoveowner" and parsed.length() > 1)
					send_reliable(peer_id, "addremoveowner " + string_replace(get_event_message(), parsed[0] + " ", "", true), 0);
				else if (parsed[0] == "buildlitem") {
					binput@ dat = builder_input("text=enter 0 to disable and 1 to enable this feature");
					if (@dat == null) return;
					send_reliable(peer_id, "addlitem litem:" + dat.num("text"), 0);
				} else if (parsed[0] == "builddescription") {
					binput@ dat = builder_input("text=enter the description");
					if (@dat == null) return;
					send_reliable(peer_id, "adddescription description:" + dat.num("text"), 0);
				} else if (parsed[0] == "buildpvp") {
					buildpvp();
				} else if (parsed[0] == "buildopening_hours") {
					buildopening_hours();
				} else if (parsed[0] == "buildlevel") {
					buildlevel();
				} else if (parsed[0] == "buildreinforcement") {
					buildreinforcement();
				} else if (parsed[0] == "buildtask_status") {
					buildtask_status();
				} else if (parsed[0] == "spawn_fire" and parsed.length() > 3) {
					int x = string_to_number(parsed[1]);
					int y = string_to_number(parsed[2]);
					int z = string_to_number(parsed[3]);
					string map = parsed[4];
					spawn_tile(string_to_number(parsed[1]), string_to_number(parsed[1]), string_to_number(parsed[2]), string_to_number(parsed[2]), string_to_number(parsed[3]), string_to_number(parsed[3]), "fire");
				} else if (parsed[0] == "admintell") {
					if (admin == true) {
						string MessageBox;
						MessageBox = string_replace(get_event_message(), "admintell ", "", false);
						p.play_stationary("admintell.ogg", false);
						add_sbuffer_item("speech", MessageBox);
						add_buffer_item("admintells", MessageBox);
					}
				} else if (parsed[0] == "sleepstart") {
					sleeptimer.restart();
					sleepmode = 1;
					fade_pool(p, -100, 10);
					fade_pool(mpool, -100, 10);
					fade_pool(distpool, -100, 10);
					fade_pool(placedistpool, -100, 10);
					fade_pool(sourcepool, -100, 10);
					fade_pool(musicpool, -100, 10);
					fade_pool(signpool, -100, 10);
					fade_pool(itempool, -100, 10);
					sleepstart.load("sleepstart.ogg");
					sleepstart.play();
					pause_all_sources();
					pause_all_musics();
					pause_all_urls();
					pause_all_timedsounds();
					pause_all_timedmusics();
					pause_all_naturals();
					for (uint i = 0; i < msounds.length(); i++)
						mpool.pause_sound(msounds[i].loopint);
				} else if (parsed[0] == "sleepstop") {
					sleepmode = -1;
					fade(dreamsound);
					fade(sleeping);
					sleeping.close();
					dreamsound.close();
					fade_pool(p, 0, 40);
					fade_pool(mpool, 0, 40);
					fade_pool(distpool, 0, 40);
					fade_pool(placedistpool, 0, 40);
					fade_pool(sourcepool, 0, 40);
					fade_pool(musicpool, 0, 40);
					fade_pool(signpool, 0, 40);
					fade_pool(itempool, 0, 40);
					resume_all_sources();
					resume_all_musics();
					resume_all_urls();
					resume_all_timedsounds();
					resume_all_timedmusics();
					resume_all_naturals();
					for (uint i = 0; i < msounds.length(); i++)
						mpool.resume_sound(msounds[i].loopint);
				} else if (parsed[0] == "notwearing") {
					string m = "But you aren't wearing it!";
					add_sbuffer_item("speech", m);
					add_buffer_item("clothing", m);
				} else if (parsed[0] == "alreadywearingdress") {
					string m = "You're trying to dress one piece over another. It will not work";
					add_sbuffer_item("speech", m);
					add_buffer_item("clothing", m);
				} else if (parsed[0] == "clothing") {
					string a = string_replace(get_event_message(), parsed[0] + " ", "", false);
					string m;
					a = string_replace(a, "You are naked!", "you are naked!", true);
					a = string_replace(a, "You are naked!", "you are naked!", true);
					a = string_replace(a, "are naked!", "are naked!", true);
					a = string_replace(a, "No one close to you", "no one close to you", false);
					a = string_replace(a, "are naked!", "are naked!", true);
					a = string_replace(a, "You are wearing: ", "You are wearing: ", true);
					a = string_replace(a, "are naked!", "are naked!", true);
					a = string_replace(a, "You are just wearing", "You are just wearing", true);
					string[] b = string_split(a, " ", false);
					for (uint i = 0; i < b.length(); i++) {
						if (string_contains(b[i], ",", 1) != -1) {
							b[i] = string_replace(b[i], ",", "", true);
							b[i] = string_replace(b[i], b[i], b[i] + ",", true);
						}
						if (string_contains(b[i], ".", 1) != -1) {
							b[i] = string_replace(b[i], ".", "", true);
							b[i] = string_replace(b[i], b[i], b[i] + ".", true);
						}
						b[i] = string_replace(b[i], "one", "one", true);
						b[i] = string_replace(b[i], ", an", ", " + "an", true);
						b[i] = string_replace(b[i], "one", "one", true);
					}
					for (uint i = 0; i < b.length(); i++)
						m += b[i] + " ";
					add_sbuffer_item("speech", m);
					add_buffer_item("clothing", m);
				} else if (parsed[0] == "alreadywearing") {
					string m = "But you are already wearing it!";
					add_sbuffer_item("speech", m);
					add_buffer_item("clothing", m);
				} else if (parsed[0] == "phone") {
					string telefonar = fone.input("");
					sound s;
					s.load("telefone.ogg");
					int a = random(2, 9);
					for (int i = 0; i < a; i++) {
						s.play();
						while (s.playing) {
							wait(5);
							mainloop();
							if (key_up(KEY_LSHIFT) and key_up(KEY_RSHIFT)) {
								if (key_pressed(KEY_COMMA) == false and kcomma.pressing())
									prevbufferitem();
								if (key_pressed(KEY_PERIOD) == false and kperiod.pressing())
									nextbufferitem();
								if (key_pressed(KEY_LBRACKET) == false and klbracket.pressing())
									bufferleft();
								if (key_pressed(KEY_RBRACKET) == false and krbracket.pressing())
									bufferright();
							}
							if (shift_is_down()) {
								if (key_pressed(KEY_COMMA))
									topbufferitem();
								if (key_pressed(KEY_PERIOD))
									bottombufferitem();
								if (key_pressed(KEY_LBRACKET))
									firstbuffer();
								if (key_pressed(KEY_RBRACKET))
									lastbuffer();
							}
							if (key_pressed(KEY_SLASH)) {
								string chat = v.input("type your message here");
								if (chat != "" and !is_eloquence_crash_word(chat) and get_sequence(chat, true) <= 3) {
									string[] chats = string_split(chat, "::", true);
									if (chat != "") {
										string sendmsg = chat;
										for (uint a = 0; a < aliases.length(); a += 1) {
											string[] a2 = string_split(aliases[a], ":", false);
											if (a2.length() == 2)
												sendmsg = string_replace(sendmsg, a2[0], a2[1], true);
										}
										send_reliable(peer_id, sendmsg, 1);
									}
								}
							}
							if (key_pressed(KEY_BACKSLASH) and dlocalchat == 0) {
								string s = v.input("type your message here");
								if (s != "" and !is_eloquence_crash_word(s) and get_sequence(s, true) <= 3) {
									string sendmsg = s;
									for (uint a = 0; a < aliases.length(); a += 1) {
										string[] a2 = string_split(aliases[a], ":", false);
										if (a2.length() == 2)
											sendmsg = string_replace(sendmsg, a2[0], a2[1], true);
									}
									send_reliable(peer_id, "localchat " + sendmsg, 0);
								}
							}
							if (key_up(KEY_LSHIFT) and key_up(KEY_RSHIFT) and key_up(KEY_LMENU) and key_up(KEY_RMENU) and key_pressed(KEY_EQUALS)) {
								string colocar = v.input("enter the command. Note: / will be put before it automaticly");
								if (colocar != "" and !is_eloquence_crash_word(colocar) and get_sequence(colocar, true) <= 3) {
									string sendmsg = colocar;
									for (uint a = 0; a < aliases.length(); a += 1) {
										string[] a2 = string_split(aliases[a], ":", false);
										if (a2.length() == 2)
											sendmsg = string_replace(sendmsg, a2[0], a2[1], true);
									}
									send_reliable(peer_id, "/" + sendmsg, 1);
								}
							}
						}
					}
				} else if (parsed[0] == "msg")
					msgmenu();
				else if (parsed[0] == "apps")
					appsmenu();
				else if (parsed[0] == "small_saw") {
					if (get_tile_at(me.x, me.y, me.z) == "wobbly_wood" or get_tile_at(me.x, me.y, me.z) == "wood" or get_tile_at(me.x, me.y, me.z) == "wood2" or get_tile_at(me.x, me.y, me.z) == "wood3" or get_tile_at(me.x, me.y, me.z) == "wood4" or get_tile_at(me.x, me.y, me.z) == "wood5" or get_tile_at(me.x, me.y, me.z) == "wood6" or get_tile_at(me.x, me.y, me.z) == "wood7" or get_tile_at(me.x, me.y, me.z) == "wood8" or get_tile_at(me.x, me.y, me.z) == "wood9" or get_tile_at(me.x, me.y, me.z) == "wood10" or get_tile_at(me.x, me.y, me.z) == "wood12" or get_tile_at(me.x, me.y, me.z) == "wood13" or get_tile_at(me.x, me.y, me.z) == "wood14" or get_tile_at(me.x, me.y, me.z) == "wood15" or get_tile_at(me.x, me.y, me.z) == "wood16" or get_tile_at(me.x, me.y, me.z) == "wood17" or get_tile_at(me.x, me.y, me.z) == "wood18" or get_tile_at(me.x, me.y, me.z) == "stairs" or get_tile_at(me.x, me.y, me.z) == "smallwood" or get_tile_at(me.x, me.y, me.z) == "bridge" or get_tile_at(me.x, me.y, me.z) == "bridge2" or get_tile_at(me.x, me.y, me.z) == "bridge3" or get_tile_at(me.x, me.y, me.z) == "old_wood" or get_tile_at(me.x, me.y, me.z) == "plywood" or get_tile_at(me.x, me.y, me.z) == "plywood2" or get_tile_at(me.x, me.y, me.z) == "plywood3" or get_tile_at(me.x, me.y, me.z) == "plywood4") {
						rvp.play_stationary("smallsaw" + random(1, 5) + ".ogg", false);
						send_reliable(peer_id, "draw smallsaw" + random(1, 5) + ".ogg", 7);
						send_reliable(peer_id, "getwwood", 0);
					}
				} else if (parsed[0] == "large_saw") {
					if (get_tile_at(me.x, me.y, me.z) == "hardwood" or get_tile_at(me.x, me.y, me.z) == "hardwood2" or get_tile_at(me.x, me.y, me.z) == "hadwood3" or get_tile_at(me.x, me.y, me.z) == "hardwood4" or get_tile_at(me.x, me.y, me.z) == "hardwood5" or get_tile_at(me.x, me.y, me.z) == "hardwood6" or get_tile_at(me.x, me.y, me.z) == "hardwood7") {
						rvp.play_stationary("largesaw" + random(1, 5) + ".ogg", false);
						send_reliable(peer_id, "draw largesaw" + random(1, 5) + ".ogg", 7);
						send_reliable(peer_id, "getwwood", 0);
					} else if (get_tile_at(me.x, me.y, me.z) == "metal" or get_tile_at(me.x, me.y, me.z) == "metal2" or get_tile_at(me.x, me.y, me.z) == "metal3" or get_tile_at(me.x, me.y, me.z) == "metal4" or get_tile_at(me.x, me.y, me.z) == "metal5" or get_tile_at(me.x, me.y, me.z) == "metal6" or get_tile_at(me.x, me.y, me.z) == "metal7" or get_tile_at(me.x, me.y, me.z) == "metal8" or get_tile_at(me.x, me.y, me.z) == "metal9" or get_tile_at(me.x, me.y, me.z) == "metal10" or get_tile_at(me.x, me.y, me.z) == "metal11" or get_tile_at(me.x, me.y, me.z) == "metal12" or get_tile_at(me.x, me.y, me.z) == "metal13" or get_tile_at(me.x, me.y, me.z) == "metalpipe" or get_tile_at(me.x, me.y, me.z) == "ladder" or get_tile_at(me.x, me.y, me.z) == "ladder2" or get_tile_at(me.x, me.y, me.z) == "ladder3") {
						rvp.play_stationary("largesaw" + random(1, 5) + ".ogg", false);
						send_reliable(peer_id, "draw largesaw" + random(1, 5) + ".ogg", 7);
						send_reliable(peer_id, "getmmetal", 0);
					}
				} else if (parsed[0] == "boat") {
					walktimer.restart();
					bbforward();
					walktime += 0.05;
					airtime += 0.05;
					movecheck2();
				} else if (parsed[0] == "launchmenu") {
					string i = string_replace(parsed[1], "[SPCE]", " ", true);
					string t = string_replace(parsed[2], "[SPCE]", " ", true);
					string items = string_replace(get_event_message(), parsed[0] + " " + parsed[1] + " " + parsed[2] + " ", "", true);
					serverside_menu(t, i, items);
				} else if (parsed[0] == "launchmenu2") {
					string i = string_replace(parsed[1], "[SPCE]", " ", true);
					string t = string_replace(parsed[2], "[SPCE]", " ", true);
					string items = string_replace(get_event_message(), parsed[0] + " " + parsed[1] + " " + parsed[2] + " ", "", true);
					serverside_menu2(t, i, items);
				} else if (parsed[0] == "chuvaativa") {
					chuvaativa = 1;
					if (chuvatelhado.playing) chuvatelhado.close();
					chuvatelhado.volume = -12;
					if (chuvaativa == 1 and somchuva != "none.ogg") {
						chuvatelhado.load(somchuva);
						chuvatelhado.play_looped();
					}
				} else if (parsed[0] == "fimchuva") {
					chuvaativa = 0;
					chuvatelhado.pause();
				} else if (parsed[0] == "windativa") {
					windativa = 1;
					if (windtelhado.playing) windtelhado.close();
					windtelhado.volume = -12;
					if (windativa == 1 and somwind != "none.ogg") {
						windtelhado.load(somwind);
						windtelhado.play_looped();
					}
				} else if (parsed[0] == "fimwind") {
					windativa = 0;
					windtelhado.pause();
				} else if (parsed[0] == "nightativa") {
					nightativa = 1;
					if (nighttelhado.playing) nighttelhado.close();
					nighttelhado.volume = -12;
					if (nightativa == 1 and somnight != "none.ogg") {
						nighttelhado.load(somnight);
						nighttelhado.play_looped();
					}
				} else if (parsed[0] == "fimnight") {
					nightativa = 0;
					nighttelhado.pause();
				} else if (parsed[0] == "spawnfire_starter" and parsed.length() > 5) {
					int x = string_to_number(parsed[1]);
					int y = string_to_number(parsed[2]);
					int z = string_to_number(parsed[3]);
					string map = parsed[4];
					int id = string_to_number(parsed[5]);
					spawn_fire_starter(x, y, z, map, id);
				} else if (parsed[0] == "killfire_starter" and parsed.length() > 1) {
					int fs = find_fire_starter(string_to_number(parsed[1]));
					if (fs > -1) {
						@fire_starters[fs] = null;
						fire_starters.remove_at(fs);
					}
				} else if (parsed[0] == "volumechuva") {
					chuvalivre.volume = string_to_number(parsed[1]);
					chuvatelhado.volume = string_to_number(parsed[1]);
				} else if (parsed[0] == "pst") {
					if (somchuva != "none.ogg")
						p.play_stationary(parsed[1], false);
				} else if (parsed[0] == "volumewind") {
					windlivre.volume = string_to_number(parsed[1]);
					windtelhado.volume = string_to_number(parsed[1]);
				} else if (parsed[0] == "wpst") {
					if (somwind != "none.ogg")
						p.play_stationary(parsed[1], false);
				} else if (parsed[0] == "volumenight") {
					nightlivre.volume = string_to_number(parsed[1]);
					nighttelhado.volume = string_to_number(parsed[1]);
				} else if (parsed[0] == "npst") {
					if (somnight != "none.ogg")
						p.play_stationary(parsed[1], false);
				} else if (parsed[0] == "hempty") {
					int index = string_to_number(parsed[1]);
					draw = "";
					if (index == 1)
						lefthand = "";
					llastuse = "";
					if (index == 2)
						righthand = "";
					rlastuse = "";
				} else if (parsed[0] == "canjump")
					canjump = true;
				else if (parsed[0] == "cannotjump")
					canjump = false;
				else if (parsed[0] == "setwalktime")
					walktime = string_to_number(parsed[1]);
				else if (parsed[0] == "resetwalktime") {
					walkmod = false;
					walktime = 180;
					if (canjump == false) canjump = true;
					airtime = 100;
				} else if (parsed[0] == "w+") {
					walktime += 0.5;
					airtime += 0.5;
					writeprefs();
				} else if (parsed[0] == "w-") {
					walktime -= 0.5;
					airtime -= 0.5;
					writeprefs();
				} else if (parsed[0] == "bw+") {
					bmovetime += 0.05;
					writeprefs();
				} else if (parsed[0] == "w-") {
					bmovetime -= 0.05;
					writeprefs();
				} else if (parsed[0] == "sendpacket2" && parsed.length() > 2)
					send_reliable(peer_id, string_replace(get_event_message(), parsed[0] + " " + parsed[1] + " ", "", true), string_to_number(parsed[1]));
				else if (parsed[0] == "playerlog") {
					file lf;
					lf.open("players.log", "wb");
					lf.write(string_replace(get_event_message(), "playerlog ", "", false));
					lf.close();
					speak("log written");
				} else if (parsed[0] == "dlg") {
					string MessageBox = string_replace(get_event_message(), "dlg ", "", false);
					dlg(MessageBox, true);
				} else if (parsed[0] == "enterplace" && parsed.length() >= 5) {
					place.x = string_to_number(parsed[1]);
					place.y = string_to_number(parsed[2]);
					place.z = string_to_number(parsed[3]);
					placemap = parsed[4];
					inplace = true;
				} else if (parsed[0] == "exitplace") {
					place.x = 0;
					place.y = 0;
					place.z = 0;
					placemap = "";
					inplace = false;
				} else if (parsed[0] == "restart") {
					speak("resetting the server... Please wait...");
					reconnect();
					writeprefs();
				} else if (parsed[0] == "servershutdown") {
					string r = string_trimleft(get_event_message(), (parsed[0] + " ").length());
					if (stringright(r, 1) == ".") r = string_trimright(r, 1);
					exitgame(false);
					dlg("the server offline" + (r != "" ? " for the following reason" : "") + "." + (r != "" ? " " + r + "." : ""));
					mainmenu();
					return;
				} else if (parsed[0] == "serverreboot") {
					string r = string_trimleft(get_event_message(), (parsed[0] + " ").length());
					if (stringright(r, 1) == ".") r = string_trimright(r, 1);
					string speak_msg = "The server is restarting" + (r != "" ? " for the following reason: " + r : "");
					speak(speak_msg);
					exitgame(false);
					p.play_stationary("reconnected" + sndtype, false);
					reconnect();
					return;
				} else if (parsed[0] == "msgvoc ganhou") {
					string m = ("you got ") + " " + parsed[1] + " xp!";
					add_sbuffer_item("speech", m);
					add_buffer_item("misc", m);
				} else if (parsed[0] == "msgvoc ganhou2") {
					string m = ("you got ") + " " + parsed[1] + " " + ("xp because of double xp!");
					add_sbuffer_item("speech", m);
					add_buffer_item("misc", m);
				} else if (parsed[0] == "msgvoc ganhou10") {
					string m = ("you got ") + " " + parsed[1] + " " + ("xp because of super xp!");
					add_sbuffer_item("speech", m);
					add_buffer_item("misc", m);
				} else if (parsed[0] == "msgsublinhado") {
					string a = get_event_message();
					string b;
					string m;
					a = string_replace(a, parsed[0] + " ", "", true);
					string[] mm = string_split(a, " ", false);
					for (uint i = 0; i < mm.length(); i++) {
						b = mm[i];
						b = string_replace(b, "_", " ", true);
						m += b + " ";
					}
					add_sbuffer_item("speech", m);
					add_buffer_item("misc", m);
				} else if (parsed[0] == "msg2") {
					string m;
					string a = get_event_message();
					a = string_replace(a, parsed[0] + " ", "", false);
					string[] b = string_split(a, ";", false);
					for (uint i = 0; i < b.length(); i++)
						m += (b[i]);
					add_sbuffer_item("speech", m);
					add_buffer_item("misc", m);
				} else if (parsed[0] == "motd2") {
					string mensagem = get_event_message();
					mensagem = string_replace(mensagem, parsed[0] + " ", "", true);
					add_sbuffer_item("speech", "Mensagem do dia:" + " " + mensagem);
					add_buffer_item("misc", "Mensagem do dia:" + " " + mensagem);
				} else if (parsed[0] == "menusound") {
					int x = string_to_number(parsed[1]);
					int y = string_to_number(parsed[2]);
					int z = string_to_number(parsed[3]);
					string map = parsed[4];
					string pn = parsed[5];
					if (name != pn and mapname == map)
						rvp.play_3d(parsed[6], me.x, me.y, me.z, x, y, z, calculate_theta(facing), false);
				} else if (parsed[0] == "mtester") mtester(string_replace(get_event_message(), "mtester ", "", true));
				else if (parsed[0] == "mtester3") mtester3(string_replace(get_event_message(), "mtester3 ", "", true));
				else if (parsed[0] == "tlptester") tlptester(string_replace(get_event_message(), "tlptester ", "", true));
				else if (parsed[0] == "ragequit")
					send_reliable(peer_id, "rqclose", 0);
				else if (parsed[0] == "ragequitok") {
					int rqnum = random(1, 7);
					dlgmeu("", "rage" + rqnum + ".ogg", true, 30);
					wait(200);
					exit();
				} else if (parsed[0] == "islcm") {
					lcm = true;
				} else if (parsed[0] == "isstaff" && parsed.length() > 1) {
					string t = string_trim_left(get_event_message(), (parsed[0] + " ").length());
					staff.setstaff(t, true);
					return;
				} else if (parsed[0] == "isnotstaff" && parsed.length() > 1) {
					string t = string_trim_left(get_event_message(), (parsed[0] + " ").length());
					staff.setstaff(t, false);
					return;
				} else if (parsed[0] == "srmenu") {
					string meitems;
					string[] bl = string_split(get_event_message(), ":", false);
					for (uint i = 1; i < bl.length(); i++)
						meitems += bl[i];
					servermenu(string_trim_left(bl[0], 7), meitems);
				} else if (parsed[0] == "srmenui") {
					string meitems;
					string myacts;
					string[] bl = string_split(get_event_message(), ":", false);
					string[] bl2 = string_split(get_event_message(), "-_", true);
					for (uint i = 1; i < bl.length(); i++)
						meitems += bl[i];
					for (uint i = 0; i < bl2.length(); i++)
						myacts += bl2[i];
					servermenu(string_trim_left(bl[0], 7), meitems, false, 1, myacts);
				} else if (parsed[0] == "followstart") {
					can_move = false;
					following = true;
				} else if (parsed[0] == "followstop") {
					can_move = true;
					following = false;
				} else if (parsed[0] == "lookstart") {
					can_move = false;
					looking = true;
				} else if (parsed[0] == "lookstop") {
					can_move = true;
					looking = false;
				} else if (parsed[0] == "forcekey" and parsed.length() > 1) {
					int keycode = string_to_number(parsed[1]);
					//force_key_down(keycode);
					key_released(keycode);
				} else if (parsed[0] == "startmoving")
					can_move = true;
				else if (parsed[0] == "stopmoving")
					can_move = false;
				else if (parsed[0] == "movestart")
					can_move = true;
				else if (parsed[0] == "movestop")
					can_move = false;
				else if (parsed[0] == "freezestart") {
					can_move = false;
					frozen = true;
					pause_all_sources();
					pause_all_musics();
					pause_all_urls();
					pause_all_timedsounds();
					pause_all_timedmusics();
					pause_all_naturals();
					for (uint i = 0; i < msounds.length(); i++)
						mpool.pause_sound(msounds[i].loopint);
				} else if (parsed[0] == "freezestop") {
					can_move = true;
					frozen = false;
					resume_all_sources();
					resume_all_musics();
					resume_all_urls();
					resume_all_timedsounds();
					resume_all_timedmusics();
					resume_all_naturals();
					for (uint i = 0; i < msounds.length(); i++)
						mpool.resume_sound(msounds[i].loopint);
				} else if (parsed[0] == "look" and parsed.length() > 4) {
					me.x = string_to_number(parsed[1]);
					me.y = string_to_number(parsed[2]);
					me.z = string_to_number(parsed[3]);
					lookname = parsed[4];
					if (tpool1.elapsed >= npool1) {
						tpool1.restart();
						npool1 = random(30, 300);
						mpool.update_listener_3d(me.x, me.y, me.z, calculate_theta(facing));
						p.update_listener_3d(me.x, me.y, me.z, calculate_theta(facing));
						sourcepool.update_listener_3d(me.x, me.y, me.z, calculate_theta(facing));
						musicpool.update_listener_3d(me.x, me.y, me.z, calculate_theta(facing));
						distpool.update_listener_3d(me.x, me.y, me.z, calculate_theta(facing));
						placedistpool.update_listener_3d(me.x, me.y, me.z, calculate_theta(facing));
					}
					if (tpool2.elapsed >= npool2) {
						tpool2.restart();
						npool2 = random(30, 300);
						distpool.update_listener_3d(me.x, me.y, me.z, calculate_theta(facing));
						placedistpool.update_listener_3d(me.x, me.y, me.z, calculate_theta(facing));
						signpool.update_listener_3d(me.x, me.y, me.z, calculate_theta(facing));
						itempool.update_listener_3d(me.x, me.y, me.z, calculate_theta(facing));
					}
				} else if (parsed[0] == "speak")
					speak(string_trim_left(get_event_message(), 6));
				else if (parsed[0] == "clip")
					clipboard_copy_text(string_trim_left(get_event_message(), 5));
				else if (parsed[0] == "addbchat") {
					string msg = get_event_message();
					msg = string_replace(msg, parsed[0] + " ", "", true);
					string m = msg;
					add_buffer_item("chats", msg);
				} else if (parsed[0] == "peak") {
					string msg;
					msg = string_replace(get_event_message(), "peak ", "", false);
					p.play_stationary("peak.ogg", false);
					add_buffer_item("notifications", msg);
				} else if (parsed[0] == "checkpointcheckclient")
					send_reliable(peer_id, "checkpointcheck", 0);
				else if (parsed[0] == "notify" and buffer_active("notifications") == 1) {
					string msg;
					msg = string_replace(get_event_message(), "notify ", "", false);
					p.play_stationary("notice.ogg", false);
					add_buffer_item("notifications", msg);
				} else if (parsed[0] == "maps" and buffer_active("maps") == 1) {
					string msg;
					msg = string_replace(get_event_message(), "maps ", "", false);
					add_buffer_item("maps", msg);
				} else if (parsed[0] == "channel_message" and buffer_active("maps") == 1) {
					string msg;
					msg = string_replace(get_event_message(), "channel_message ", "", false);
					add_buffer_item("channel messages", msg);
				} else if (parsed[0] == "channelenter" and buffer_active("maps") == 1) {
					string msg;
					msg = string_replace(get_event_message(), "channelenter ", "", false);
					p.play_stationary("notify_blips.ogg", false);
					add_buffer_item("channel messages", msg);
				} else if (parsed[0] == "channelexit" and buffer_active("maps") == 1) {
					string msg;
					msg = string_replace(get_event_message(), "channelexit ", "", false);
					p.play_stationary("notify_google4.ogg", false);
					add_buffer_item("channel messages", msg);
				} else if (parsed[0] == "channelkick" and buffer_active("maps") == 1) {
					string msg;
					msg = string_replace(get_event_message(), "channelkick ", "", false);
					p.play_stationary("kick.ogg", false);
					add_buffer_item("channel messages", msg);
				} else if (parsed[0] == "notify2") {
					string msg;
					msg = string_replace(get_event_message(), "notify2 ", "", false);
					p.play_stationary("notify2.ogg", false);
					add_buffer_item("notifications", msg);
				} else if (parsed[0] == "notify_startrek_chime") {
					string msg;
					msg = string_replace(get_event_message(), "notify_startrek_chime ", "", false);
					p.play_stationary("notify_startrek_chime.ogg", false);
					add_buffer_item("notifications", msg);
				} else if (parsed[0] == "notify3") {
					string msg;
					msg = string_replace(get_event_message(), "notify3 ", "", false);
					p.play_stationary("notify3.ogg", false);
					add_buffer_item("notifications", msg);
				} else if (parsed[0] == "notify4") {
					string msg;
					msg = string_replace(get_event_message(), "notify4 ", "", false);
					p.play_stationary("notify4.ogg", false);
					add_buffer_item("notifications", msg);
				} else if (parsed[0] == "notify5") {
					string msg;
					msg = string_replace(get_event_message(), "notify5 ", "", false);
					p.play_stationary("notify5.ogg", false);
					add_buffer_item("notifications", msg);
				} else if (parsed[0] == "notify6") {
					string msg;
					msg = string_replace(get_event_message(), "notify6 ", "", false);
					p.play_stationary("notify6.ogg", false);
					add_buffer_item("notifications", msg);
				} else if (parsed[0] == "spnotify") {
					string msg;
					msg = string_replace(get_event_message(), "spnotify ", "", false);
					p.play_stationary("notify_blips3.ogg", false);
					add_buffer_item("notifications", msg);
				} else if (parsed[0] == "death") {
					walktime = 180;
					airtime = 220;
					send_reliable(peer_id, "revive", 0);
					send_reliable(peer_id, "move " + me.x + " " + me.y + " " + me.z, 8);
					if (sleepmode != 0) {
						sleepmode = -1;
						fade(dreamsound);
						fade(sleeping);
						fade_pool(p, 0, 40);
						fade_pool(mpool, 0, 10);
						fade_pool(distpool, 0, 10);
						fade_pool(placedistpool, 0, 10);
						fade_pool(sourcepool, 0, 10);
						fade_pool(musicpool, 0, 10);
						fade_pool(signpool, 0, 10);
						fade_pool(itempool, 0, 10);
					}
				} else if (parsed[0] == "input") {
					string[] ds = string_split(string_replace(get_event_message(), "input ++", "", false), "++", false);
					serverbox(string_to_number(ds[0]), string_to_number(ds[1]), string_to_number(ds[2]), string_to_number(ds[3]), ds[4], ds[5]);
				} else if (parsed[0] == "trackplayer") {
					int x = round(string_to_number(parsed[2]), 0);
					int y = round(string_to_number(parsed[3]), 0);
					int z = string_to_number(parsed[4]);
					string mp = parsed[5];
					if (mapname != mp)
						speak("This player is on a different map. Sorry");
					else
						tell_where(x, y, z, parsed[6], true);
				} else if (parsed[0] == "playermapmenu") {
					string content = string_replace(get_event_message(), "playermapmenu ", "", false);
					if (content == "" or content == " ") {
						if (tracking != "") {
							string[] p = {"Stop Tracking"};
							player::menu::map(p);
						} else {
							speak("Just you are in this map");
						}
					} else {
						string m = "Stop Tracking\n" + content;
						string[] playerstuff = string_split(m, "\n");
						player::menu::map(playerstuff);
					}
				} else if (parsed[0] == "playermenu") {
					string m = string_replace(get_event_message(), "playermenu", "", true);
					string[] playerstuff = string_split(m, "\n");
					player::menu::entire(playerstuff);
				} else if (parsed[0] == "newitem") {
					int x = string_to_number(parsed[1]);
					int y = string_to_number(parsed[2]);
					int z = string_to_number(parsed[3]);
					string map = parsed[4];
					int itemid = string_to_number(parsed[5]);
					spawn_mapitem(x, y, z, map, itemid);
				} else if (parsed[0] == "remitem" and parsed.length() > 1)
					remove_mapitem(string_to_number(parsed[1]));
				else if (parsed[0] == "speedup")
					walktime -= random(120, 170);
				else if (parsed[0] == "speeddown")
					walktime -= random(180, 220);
				else if (parsed[0] == "walkmod")
					walktime -= random(170, 190);
				else if (parsed[0] == "speed_drink0")
					walktime = 180;
				else if (parsed[0] == "speed_drink1")
					walktime = 150;
				else if (parsed[0] == "changepass" and parsed.length() > 1) {
					password = parsed[1];
					accounts.insert_last("name: " + name + ". Password: " + password + "");
					writeprefs();
					reconnect();
				} else if (parsed[0] == "jumping") {
					int x = string_to_number(parsed[1]);
					int y = string_to_number(parsed[2]);
					int z = string_to_number(parsed[3]);
					rvp.play_3d("jump" + random(1, 22) + ".ogg", me.x, me.y, me.z, x, y, z, calculate_theta(facing), false);
				} else if (parsed[0] == "facing" && parsed.length() > 1)
					facing = string_to_number(parsed[1]);
				else if (parsed[0] == "updatesvr") {
					send_reliable(peer_id, "close", 0);
					speak("The server is updating. Reconnecting to server...");
					reconnect();
					connected = false;
					writeprefs();
				} else if (parsed[0] == "killclient") {
					if (importbufferlogs == 1) export_all_buffers();
					exitgame(false);
					writeprefs();
					exit();
				} else if (parsed[0] == "offline" and parsed.length() > 5) {
					if (parsed[4] == name) {
						x = false;
						exitgame(true);
					}
					int x = string_to_number(parsed[1]);
					int y = string_to_number(parsed[2]);
					int z = string_to_number(parsed[3]);
					string n = parsed[4];
					string m = parsed[5];
					remove_player(n);
					if (readolmsg == 1 and name != "smart_bot") {
						if (offlinesound == "random") {
							if (offsound == 1) p.play_stationary("offline" + random(1, 25) + ".ogg", false);
							else p.play_stationary("offline" + random(1, 25) + ".ogg", false);
						} else {
							if (offsound == 1) p.play_stationary(offlinesound + ".ogg", false);
							else p.play_stationary(offlinesound + ".ogg", false);
						}
					} else if (parsed[4] != name) {
						if (readolmsg == 1 and name != "smart_bot") {
							if (offlinesound == "random") {
								if (offsound == 1) p.play_stationary("offline" + random(1, 25) + ".ogg", false);
								else p.play_stationary("offline" + random(1, 25) + ".ogg", false);
							} else {
								if (offsound == 1) p.play_stationary(offlinesound + ".ogg", false);
								else p.play_stationary(offlinesound + ".ogg", false);
							}
						}
					}
				} else if (parsed[0] == "m_data")
					load_map(string_replace(get_event_message(), "m_data ", "", true));
				else if (parsed[0] == "online" && parsed.length() > 5) {
					int x = string_to_number(parsed[1]);
					int y = string_to_number(parsed[2]);
					int z = string_to_number(parsed[3]);
					string n = parsed[4];
					string mp = parsed[5];
					if (readolmsg == 1 and name != n and name != "smart_bot") {
						if (onlinesound == "random") {
							if (onsound == 1) p.play_stationary("online" + random(1, 24) + ".ogg", false);
							else p.play_stationary("online" + random(1, 24) + ".ogg", false);
						} else {
							if (onsound == 1) p.play_stationary(onlinesound + ".ogg", false);
							else p.play_stationary(onlinesound + ".ogg", false);
						}
						spawn_player(x, y, z, mp, n);
					} else if (parsed[4] != name) {
						if (readolmsg == 1 and name != "smart_bot") {
							if (onlinesound == "random") {
								if (onsound == 1) p.play_stationary("online" + random(1, 24) + ".ogg", false);
								else p.play_stationary("online" + random(1, 24) + ".ogg", false);
							} else {
								if (onsound == 1) p.play_stationary(onlinesound + ".ogg", false);
								else p.play_stationary(onlinesound + ".ogg", false);
							}
						}
					}
				} else if (parsed.length() >= 5 and is_sound_number(parsed[1]) and is_sound_number(parsed[2]) and is_sound_number(parsed[3])) {
					if (parsed.length() == 5) {
						if (parsed[4] == mapname and sleepmode == -1)
							rvp.play_3d(parsed[0] + ".ogg", me.x, me.y, me.z, string_to_number(parsed[1]), string_to_number(parsed[2]), string_to_number(parsed[3]), calculate_theta(facing), false);
					}
				} else
					speak(get_event_message());
			} else if (e.channel == 1 and buffer_active("chats") == 1 and readchats == 1) {
				string[] parsed = string_split(get_event_message(), " ", false);
				if (parsed.length() > 1) {
					string action = parsed[0];
					if (action == "chat") {
						if (!buffer_muted("chats")) {
							if (chatsound == "random") {
								if (chsound == 1) p.play_stationary("chat" + random(1, 29) + ".ogg", false);
								else p.play_stationary("chat" + random(1, 29) + ".ogg", false);
							} else {
								if (chsound == 1) p.play_stationary(chatsound + ".ogg", false);
								else p.play_stationary(chatsound + ".ogg", false);
							}
						}
					} else
						p.play_stationary(action + ".ogg", false);
					string mess = string_trim_left(get_event_message(), string_len(action) + 1);
					add_sbuffer_item("speech", mess);
					add_buffer_item("chats", mess);
				}
			}
			if (e.channel == 2 and buffer_active("misc") == 1) {
				add_buffer_item("misc", get_event_message());
			}
			if (e.channel == 3) {
				string[] parsed = string_split(get_event_message(), " ", true);
				messager mdic = get_event_message_as_object();
				if (mdic.get_value("message") == "playsnd") {
					double x = stn(mdic.get_value("x"));
					double y = stn(mdic.get_value("y"));
					double z = stn(mdic.get_value("z"));
					double lx = me.x;
					double ly = me.y;
					double lz = me.z;
					string mn = mdic.get_value("map");
					string sndd = mdic.get_value("soundname");
					string alt_snd = mdic.get_value("alt_snd");
					if (@sndpack != null && alt_snd != "" && !sndpack.file_exists(sndd)) sndd = alt_snd;
					int range = stn(mdic.get_value("range", "0"));
					int s = rvp.play_3d(sndd, lx, ly, lz, x, y, z, calculate_theta(facing), false);
					rvp.update_sound_range_3d(s, 0, range, 0, range, 0, range);
					return;
				} else if (mdic.get_value("message") == "playsnd2") {
					double lx = me.x;
					double ly = me.y;
					double lz = me.z;
					string mn = mdic.get_value("map");
					string sndd = mdic.get_value("soundname");
					string[] m1s = mdic.get_value("min", "0;0;0").split(";");
					string[] m2s = mdic.get_value("max", "0;0;0").split(";");
					vector m1(stn(m1s[0]), stn(m1s[1]), stn(m1s[2]));
					vector m2(stn(m2s[0]), stn(m2s[1]), stn(m2s[2]));
					string alt_snd = mdic.get_value("alt_snd");
					if (@sndpack != null && alt_snd != "" && !sndpack.file_exists(sndd)) sndd = alt_snd;
					int range = stn(mdic.get_value("range", "0"));
					int s = rvp.play_3d(sndd, lx, ly, lz, m1.x, m1.y, m1.z, facing, false);
					rvp.update_sound_range_3d(s, 0, m2.x + range - m1.x + range, 0, m2.y - m1.y + range, 0, m2.z - m1.z + range);
					return;
				} else if (parsed.length() >= 5 and is_sound_number(parsed[1]) and is_sound_number(parsed[2]) and is_sound_number(parsed[3])) {
					if (parsed.length() == 5 and parsed[4] == mapname && frozen == false)
						rvp.play_3d(parsed[0] + ".ogg", me.x, me.y, me.z, string_to_number(parsed[1]), string_to_number(parsed[2]), string_to_number(parsed[3]), calculate_theta(facing), false);
				}
			}
			if (e.channel == 4) {
				string[] parsed = string_split(get_event_message(), " ", false);
				if (parsed[0] == "createmsound" && parsed.length() >= 8) createmsound(parsed[1], parsed[2], string_to_number(parsed[3]), string_to_number(parsed[4]), string_to_number(parsed[5]), parsed[6], string_to_number(parsed[7]));
				else if (parsed[0] == "updatemsound" && parsed.length() >= 6) updatemsound(parsed[1], string_to_number(parsed[2]), string_to_number(parsed[3]), string_to_number(parsed[4]), string_to_number(parsed[5]));
				else if (parsed[0] == "destroymsound" && parsed.length() > 1) destroymsound(parsed[1]);
			}
			if (e.channel == 5) {
				string[] parsed = string_split(get_event_message(), " ", false);
				if (parsed[0] == "voice") {
					string themap, un;
					int x, y, z;
					un = parsed[1];
					x = string_to_number(parsed[2]);
					y = string_to_number(parsed[3]);
					z = string_to_number(parsed[4]);
					themap = parsed[5];
					anumber = random(195000, 1900000);
					string vc = string_replace(get_event_message(), parsed[0] + " " + parsed[1] + " " + parsed[2] + " " + parsed[3] + " " + parsed[4] + " " + parsed[5] + " ", "", true);
					if (themap == mapname) {
						if (un == name and hearyourvoicechat == 1)
							p.play_3d(vc, me.x, me.y, me.z, x, y, z, calculate_theta(facing), false);
						else if (un != name and hearothersvoicechat == 1)
							p.play_3d(vc, me.x, me.y, me.z, x, y, z, calculate_theta(facing), false);
					}
				} else if (parsed[0] == "tts") {
					string themap, un;
					int x, y, z;
					un = parsed[1];
					x = string_to_number(parsed[2]);
					y = string_to_number(parsed[3]);
					z = string_to_number(parsed[4]);
					themap = parsed[5];
					anumber = random(195000, 1900000);
					string vc = try_memget(string_trimleft(get_event_message(), (parsed[0] + " " + parsed[1] + " " + parsed[2] + " " + parsed[3] + " " + parsed[4] + " " + parsed[5] + " ").length()));
					if (themap == mapname) {
						if (un == name and hearyourttschat == 1)
							rvp.play_3d(vc, me.x, me.y, me.z, x, y, z, calculate_theta(facing), false, memory = true);
						else if (un != name and hearothersttschat == 1)
							rvp.play_3d(vc, me.x, me.y, me.z, x, y, z, calculate_theta(facing), false, memory = true);
					}
				} else if (parsed[0] == "voice2") {
					anumber = random(195000, 1900000);
					string vc = string_replace(get_event_message(), parsed[0] + " " + parsed[1] + " ", "", true);
					p.play_stationary(vc, false);
					file f;
					f.open("voices/" + parsed[1] + " voice " + DATE_WEEKDAY_NAME + ", " + DATE_MONTH_NAME + "-" + DATE_DAY + "-" + DATE_YEAR + ", " + TIME_HOUR + " " + TIME_MINUTE + " " + TIME_SECOND + ".ogg", "wb");
					f.write(vc);
					f.close();
				} else if (parsed[0] == "tts2") {
					anumber = random(195000, 1900000);
					string vc = string_replace(get_event_message(), parsed[0] + " " + parsed[1] + " ", "", true);
					p.play_stationary(vc, false);
					file f;
					f.open("voices/" + parsed[1] + " tts message " + DATE_WEEKDAY_NAME + ", " + DATE_MONTH_NAME + "-" + DATE_DAY + "-" + DATE_YEAR + ", " + TIME_HOUR + " " + TIME_MINUTE + " " + TIME_SECOND + ".ogg", "wb");
					f.write(vc);
					f.close();
				}
			}
			if (e.channel == 6 && sleepmode == -1) {
				string[] parsed = string_split(get_event_message(), " ");
				if (parsed[0] == "play" and parsed.length() > 4)
					rvp.play_3d(parsed[1], me.x, me.y, me.z, string_to_number(parsed[2]), string_to_number(parsed[3]), string_to_number(parsed[4]), calculate_theta(facing), false);
				else if (parsed[0] == "distsound" and parsed.length() > 5) {
					string soundname = parsed[1];
					int x = string_to_number(parsed[2]);
					int y = string_to_number(parsed[3]);
					int z = string_to_number(parsed[4]);
					string soundmap = parsed[5];
					if (soundmap == mapname)
						distpool.play_3d(soundname + ".ogg", me.x, me.y, me.z, x, y, z, facing, false);
					else if (soundmap == placemap && inplace == true)
						placedistpool.play_3d(soundname + ".ogg", place.x, place.y, place.z, x, y, z, facing, false);
				} else if (parsed[0] == "playpavap" and parsed.length() > 4)
					rvp.play_3d(parsed[1], me.x, me.y, me.z, string_to_number(parsed[2]), string_to_number(parsed[3]), string_to_number(parsed[4]), calculate_theta(facing), false);
				else if (parsed[0] == "play_stationary" and parsed.length() >= 2)
					p.play_stationary(parsed[1], false);
				else if (parsed[0] == "play_file" and parsed.length() >= 2)
					p.play_stationary(string_trim_left(get_event_message(), 10), false);
				else if (parsed[0] == "gplay" && parsed.length() > 3)
					rvp.play_2d(parsed[1], me.x, me.y, string_to_number(parsed[2]), string_to_number(parsed[3]), false);
				else if (parsed[0] == "3d")
					rvp.play_3d(parsed[1], me.x, me.y, me.z, string_to_number(parsed[2]), string_to_number(parsed[3]), string_to_number(parsed[4]), calculate_theta(facing), false);
				else if (parsed[0] == "3dstep")
					rvp.play_3d(get_tile_at(string_to_number(parsed[1]), string_to_number(parsed[2]), string_to_number(parsed[3])) + "step" + random(1, 5) + ".ogg", me.x, me.y, me.z, string_to_number(parsed[1]), string_to_number(parsed[2]), string_to_number(parsed[3]), calculate_theta(facing), false);
				else if (parsed[0] == "3dsteppavap")
					rvp.play_3d(get_tile_at(string_to_number(parsed[1]), string_to_number(parsed[2]), string_to_number(parsed[3])) + "step" + random(1, 5) + ".ogg", me.x, me.y, me.z, string_to_number(parsed[1]), string_to_number(parsed[2]), string_to_number(parsed[3]), calculate_theta(facing), false);
				else if (parsed[0] == "draw" and parsed.length() >= 4) {
					if (parsed[1] != name)
						rvp.play_3d(parsed[2], me.x, me.y, me.z, string_to_number(parsed[3]), string_to_number(parsed[4]), string_to_number(parsed[5]), calculate_theta(facing), false);
				} else if (parsed[0] == "typing" and parsed.length() >= 4) {
					if (parsed[1] != name and v.hearotherskeyboardsound == 1)
						rvp.play_3d(parsed[2], me.x, me.y, me.z, string_to_number(parsed[3]), string_to_number(parsed[4]), string_to_number(parsed[5]), calculate_theta(facing), false);
				} else if (parsed[0] == "stereotyping" and parsed.length() >= 4) {
					if (parsed[1] != name and v.hearotherskeyboardsound == 1)
						if (string_to_number(parsed[3]) == me.x and string_to_number(parsed[4]) == me.y and string_to_number(parsed[5]) == me.z) rvp.play_3d(parsed[2], me.x, me.y, me.z, string_to_number(parsed[3]), string_to_number(parsed[4]), string_to_number(parsed[5]), calculate_theta(facing), false);
						else rvp.play_3d(parsed[2], me.x, me.y, me.z, string_to_number(parsed[3]), string_to_number(parsed[4]), string_to_number(parsed[5]), calculate_theta(facing), false);
				} else if (parsed[0] == "phonetyping" and parsed.length() >= 4) {
					if (parsed[1] != name and pv.hearotherskeyboardsound == 1)
						rvp.play_3d(parsed[2], me.x, me.y, me.z, string_to_number(parsed[3]), string_to_number(parsed[4]), string_to_number(parsed[5]), calculate_theta(facing), false);
				} else if (parsed[0] == "phonestereotyping" and parsed.length() >= 4) {
					if (parsed[1] != name and pv.hearotherskeyboardsound == 1)
						rvp.play_3d(parsed[2], me.x, me.y, me.z, string_to_number(parsed[3]), string_to_number(parsed[4]), string_to_number(parsed[5]), calculate_theta(facing), false);
				} else if (parsed[0] == "pmsound1" and parsed.length() >= 4) {
					if (parsed[1] != name and hearotherspmsound == 1)
						rvp.play_3d(parsed[2], me.x, me.y, me.z, string_to_number(parsed[3]), string_to_number(parsed[4]), string_to_number(parsed[5]), calculate_theta(facing), false);
				} else if (parsed[0] == "pmsound2" and parsed.length() >= 4) {
					if (parsed[1] != name and hearotherspmsound == 1)
						rvp.play_3d(parsed[2], me.x, me.y, me.z, string_to_number(parsed[3]), string_to_number(parsed[4]), string_to_number(parsed[5]), calculate_theta(facing), false);
				} else if (parsed[0] == "play_s" and parsed.length() >= 1)
					p.play_stationary(parsed[1], false);
				else if (parsed[0] == "rplay_s" and parsed.length() >= 1)
					rvp.play_stationary(parsed[1], false);
				else if (parsed[0] == "internal_play_s" and parsed.length() > 1) {
					string snd = parsed[1];
					internal.load(snd);
					internal.play();
				} else if (parsed[0] == "stoploop_s")
					svrsound.stop();
			}
			if (e.channel == 7) {
				string[] parsed = string_split(get_event_message(), " ", false);
				if (parsed[0] == "move" and parsed.length() >= 3) {
					me.x = string_to_number(parsed[1]);
					me.y = string_to_number(parsed[2]);
					me.z = string_to_number(parsed[3]);
					if (amoving == true) amoving = false;
					for (uint i = 0; i < automovers.length(); i++) {
						if (automovers[i].moving == true) automovers[i].moving = false;
					}
					for (uint i = 0; i < pautomovers.length(); i++) {
						if (pautomovers[i].moving == true) pautomovers[i].moving = false;
					}
					for (uint i = 0; i < icautomovers.length(); i++) {
						if (icautomovers[i].moving == true) icautomovers[i].moving = false;
					}
					for (uint i = 0; i < igautomovers.length(); i++) {
						if (igautomovers[i].moving == true) igautomovers[i].moving = false;
					}
					for (uint i = 0; i < itautomovers.length(); i++) {
						if (itautomovers[i].moving == true) itautomovers[i].moving = false;
					}
					if (dmoving == true) dmoving = false;
					for (uint i = 0; i < doors.length(); i++) {
						if (doors[i].moving == true) doors[i].moving = false;
					}
					for (uint i = 0; i < pdoors.length(); i++) {
						if (pdoors[i].moving == true) pdoors[i].moving = false;
					}
					for (uint i = 0; i < icdoors.length(); i++) {
						if (icdoors[i].moving == true) icdoors[i].moving = false;
					}
					for (uint i = 0; i < igdoors.length(); i++) {
						if (igdoors[i].moving == true) igdoors[i].moving = false;
					}
					for (uint i = 0; i < itdoors.length(); i++) {
						if (itdoors[i].moving == true) itdoors[i].moving = false;
					}
							}
			}
		}
	}
}
 